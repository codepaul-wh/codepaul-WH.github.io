<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis 配置 |  </title>
    <meta name="description" content=" ">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="sodoc/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.6d3e66e0.css" as="style"><link rel="preload" href="/assets/js/app.b6fcbba0.js" as="script"><link rel="preload" href="/assets/js/2.0769d472.js" as="script"><link rel="preload" href="/assets/js/71.30c55144.js" as="script"><link rel="prefetch" href="/assets/js/10.d5b488e5.js"><link rel="prefetch" href="/assets/js/11.ba7209bc.js"><link rel="prefetch" href="/assets/js/12.e31b0e29.js"><link rel="prefetch" href="/assets/js/13.319a2e91.js"><link rel="prefetch" href="/assets/js/14.9538d3bb.js"><link rel="prefetch" href="/assets/js/15.974e2eb6.js"><link rel="prefetch" href="/assets/js/16.4623b410.js"><link rel="prefetch" href="/assets/js/17.1454305d.js"><link rel="prefetch" href="/assets/js/18.0ea0d9aa.js"><link rel="prefetch" href="/assets/js/19.7ec36aa9.js"><link rel="prefetch" href="/assets/js/20.0a0492c5.js"><link rel="prefetch" href="/assets/js/21.92a8470b.js"><link rel="prefetch" href="/assets/js/22.a14b1840.js"><link rel="prefetch" href="/assets/js/23.4afb0e67.js"><link rel="prefetch" href="/assets/js/24.3e389629.js"><link rel="prefetch" href="/assets/js/25.4f11ed3d.js"><link rel="prefetch" href="/assets/js/26.efa31e99.js"><link rel="prefetch" href="/assets/js/27.20ddc719.js"><link rel="prefetch" href="/assets/js/28.eed927de.js"><link rel="prefetch" href="/assets/js/29.079ab1e8.js"><link rel="prefetch" href="/assets/js/3.79868d1c.js"><link rel="prefetch" href="/assets/js/30.1e0924ee.js"><link rel="prefetch" href="/assets/js/31.08adf573.js"><link rel="prefetch" href="/assets/js/32.428d0721.js"><link rel="prefetch" href="/assets/js/33.f0ef16bb.js"><link rel="prefetch" href="/assets/js/34.711c8d67.js"><link rel="prefetch" href="/assets/js/35.85fcf2f6.js"><link rel="prefetch" href="/assets/js/36.5eed3faf.js"><link rel="prefetch" href="/assets/js/37.65bd79fc.js"><link rel="prefetch" href="/assets/js/38.81db9686.js"><link rel="prefetch" href="/assets/js/39.e6b17a18.js"><link rel="prefetch" href="/assets/js/4.4c9f5a13.js"><link rel="prefetch" href="/assets/js/40.0e9f5587.js"><link rel="prefetch" href="/assets/js/41.9b84126f.js"><link rel="prefetch" href="/assets/js/42.ddc9ec9e.js"><link rel="prefetch" href="/assets/js/43.449fd971.js"><link rel="prefetch" href="/assets/js/44.ea48d1be.js"><link rel="prefetch" href="/assets/js/45.b98f0109.js"><link rel="prefetch" href="/assets/js/46.eb43d47f.js"><link rel="prefetch" href="/assets/js/47.ad56abc0.js"><link rel="prefetch" href="/assets/js/48.ad335a45.js"><link rel="prefetch" href="/assets/js/49.a744b401.js"><link rel="prefetch" href="/assets/js/5.229daaa0.js"><link rel="prefetch" href="/assets/js/50.ddfc0b0b.js"><link rel="prefetch" href="/assets/js/51.eec401d9.js"><link rel="prefetch" href="/assets/js/52.da7fa7ff.js"><link rel="prefetch" href="/assets/js/53.e1e2e23b.js"><link rel="prefetch" href="/assets/js/54.74848120.js"><link rel="prefetch" href="/assets/js/55.2f8c0ec8.js"><link rel="prefetch" href="/assets/js/56.d347dd0b.js"><link rel="prefetch" href="/assets/js/57.8a44d824.js"><link rel="prefetch" href="/assets/js/58.10ca6d35.js"><link rel="prefetch" href="/assets/js/59.f8d54318.js"><link rel="prefetch" href="/assets/js/6.cdc6003c.js"><link rel="prefetch" href="/assets/js/60.e6ec0e43.js"><link rel="prefetch" href="/assets/js/61.2fa7526b.js"><link rel="prefetch" href="/assets/js/62.62b59d3e.js"><link rel="prefetch" href="/assets/js/63.87ab7859.js"><link rel="prefetch" href="/assets/js/64.be84d16f.js"><link rel="prefetch" href="/assets/js/65.917244dc.js"><link rel="prefetch" href="/assets/js/66.57f646dd.js"><link rel="prefetch" href="/assets/js/67.f15ba865.js"><link rel="prefetch" href="/assets/js/68.f174a83b.js"><link rel="prefetch" href="/assets/js/69.5043f1f7.js"><link rel="prefetch" href="/assets/js/7.e24d52f3.js"><link rel="prefetch" href="/assets/js/70.84e47d9c.js"><link rel="prefetch" href="/assets/js/72.66c4f565.js"><link rel="prefetch" href="/assets/js/73.73667b18.js"><link rel="prefetch" href="/assets/js/74.84caaa20.js"><link rel="prefetch" href="/assets/js/75.9525ea19.js"><link rel="prefetch" href="/assets/js/76.ec1c236a.js"><link rel="prefetch" href="/assets/js/77.fa787e3b.js"><link rel="prefetch" href="/assets/js/78.9227621f.js"><link rel="prefetch" href="/assets/js/79.dbea9a05.js"><link rel="prefetch" href="/assets/js/8.1f18086b.js"><link rel="prefetch" href="/assets/js/80.fabc8f2d.js"><link rel="prefetch" href="/assets/js/81.12a715f0.js"><link rel="prefetch" href="/assets/js/82.0a160e72.js"><link rel="prefetch" href="/assets/js/83.f6da7255.js"><link rel="prefetch" href="/assets/js/84.a34701a7.js"><link rel="prefetch" href="/assets/js/85.fc0f1ce9.js"><link rel="prefetch" href="/assets/js/86.2d59d78d.js"><link rel="prefetch" href="/assets/js/87.bfbb78e2.js"><link rel="prefetch" href="/assets/js/88.8f033d62.js"><link rel="prefetch" href="/assets/js/89.8d3bb835.js"><link rel="prefetch" href="/assets/js/9.e1c888cc.js"><link rel="prefetch" href="/assets/js/90.dd1fc686.js"><link rel="prefetch" href="/assets/js/91.30ce9023.js"><link rel="prefetch" href="/assets/js/92.7da53901.js"><link rel="prefetch" href="/assets/js/93.fbb2d9d8.js"><link rel="prefetch" href="/assets/js/94.246aadc9.js"><link rel="prefetch" href="/assets/js/95.bd281ef2.js"><link rel="prefetch" href="/assets/js/96.03bf67a7.js"><link rel="prefetch" href="/assets/js/97.d0f3c34f.js"><link rel="prefetch" href="/assets/js/98.bb41cb1c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6d3e66e0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name"> </span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/disclaimer/" class="nav-link">
  免责声明
</a></div><div class="nav-item"><a href="https://github.com/codepaul-wh/ErrorDescription" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/disclaimer/" class="nav-link">
  免责声明
</a></div><div class="nav-item"><a href="https://github.com/codepaul-wh/ErrorDescription" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>教程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/redis/Redis教程.html" class="sidebar-link">Redis 教程</a></li><li><a href="/redis/Redis简介.html" class="sidebar-link">Redis 简介</a></li><li><a href="/redis/Redis安装.html" class="sidebar-link">Redis 安装</a></li><li><a href="/redis/Redis配置.html" class="active sidebar-link">Redis 配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis配置.html#编辑配置" class="sidebar-link">编辑配置</a></li><li class="sidebar-sub-header"><a href="/redis/Redis配置.html#参数说明" class="sidebar-link">参数说明</a></li></ul></li><li><a href="/redis/Redis数据类型.html" class="sidebar-link">Redis 数据类型</a></li><li><a href="/redis/Redis命令.html" class="sidebar-link">Redis 命令</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>命令</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/redis/Redis命令.html" class="sidebar-link">Redis 命令</a></li><li><a href="/redis/Redis键.html" class="sidebar-link">Redis 键(key)</a></li><li><a href="/redis/Redis字符串String.html" class="sidebar-link">Redis 字符串(String)</a></li><li><a href="/redis/Redis哈希Hash.html" class="sidebar-link">Redis 哈希(Hash)</a></li><li><a href="/redis/Redis列表List.html" class="sidebar-link">Redis 列表(List)</a></li><li><a href="/redis/Redis集合Set.html" class="sidebar-link">Redis 集合(Set)</a></li><li><a href="/redis/Redis有序集合sortedset.html" class="sidebar-link">Redis 有序集合(sorted set)</a></li><li><a href="/redis/RedisHyperLogLog.html" class="sidebar-link">Redis HyperLogLog</a></li><li><a href="/redis/Redis发布订阅.html" class="sidebar-link">Redis 发布订阅</a></li><li><a href="/redis/Redis事务.html" class="sidebar-link">Redis 事务</a></li><li><a href="/redis/Redis脚本.html" class="sidebar-link">Redis 脚本</a></li><li><a href="/redis/Redis连接.html" class="sidebar-link">Redis 连接</a></li><li><a href="/redis/Redis服务器.html" class="sidebar-link">Redis 服务器</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>高级教程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/redis/Redis数据备份与恢复.html" class="sidebar-link">Redis 数据备份与恢复</a></li><li><a href="/redis/Redis安全.html" class="sidebar-link">Redis 安全</a></li><li><a href="/redis/Redis性能测试.html" class="sidebar-link">Redis 性能测试</a></li><li><a href="/redis/Redis客户端连接.html" class="sidebar-link">Redis 客户端连接</a></li><li><a href="/redis/Redis管道技术.html" class="sidebar-link">Redis 管道技术</a></li><li><a href="/redis/Redis分区.html" class="sidebar-link">Redis 分区</a></li><li><a href="/redis/Java使用Redis.html" class="sidebar-link">Java 使用 Redis</a></li><li><a href="/redis/PHP使用Redis.html" class="sidebar-link">PHP 使用 Redis</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="redis-配置"><a href="#redis-配置" class="header-anchor">#</a> Redis 配置</h1> <p>Redis 的配置文件位于 Redis 安装目录下，文件名为 redis.conf。</p> <p>你可以通过 <strong>CONFIG</strong> 命令查看或设置配置项。</p> <hr> <h3 id="语法"><a href="#语法" class="header-anchor">#</a> 语法</h3> <p>Redis CONFIG 命令格式如下：</p> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; CONFIG GET CONFIG_SETTING_NAME
</code></pre></div><h3 id="实例"><a href="#实例" class="header-anchor">#</a> 实例</h3> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; CONFIG GET loglevel
 
1) &quot;loglevel&quot;
2) &quot;notice&quot;
</code></pre></div><p>使用 ***** 号获取所有配置项：</p> <h3 id="实例-2"><a href="#实例-2" class="header-anchor">#</a> 实例</h3> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; CONFIG GET *
 
  1) &quot;dbfilename&quot;
  2) &quot;dump.rdb&quot;
  3) &quot;requirepass&quot;
  4) &quot;&quot;
  5) &quot;masterauth&quot;
  6) &quot;&quot;
  7) &quot;unixsocket&quot;
  8) &quot;&quot;
  9) &quot;logfile&quot;
 10) &quot;&quot;
 11) &quot;pidfile&quot;
 12) &quot;/var/run/redis.pid&quot;
 13) &quot;maxmemory&quot;
 14) &quot;0&quot;
 15) &quot;maxmemory-samples&quot;
 16) &quot;3&quot;
 17) &quot;timeout&quot;
 18) &quot;0&quot;
 19) &quot;tcp-keepalive&quot;
 20) &quot;0&quot;
 21) &quot;auto-aof-rewrite-percentage&quot;
 22) &quot;100&quot;
 23) &quot;auto-aof-rewrite-min-size&quot;
 24) &quot;67108864&quot;
 25) &quot;hash-max-ziplist-entries&quot;
 26) &quot;512&quot;
 27) &quot;hash-max-ziplist-value&quot;
 28) &quot;64&quot;
 29) &quot;list-max-ziplist-entries&quot;
 30) &quot;512&quot;
 31) &quot;list-max-ziplist-value&quot;
 32) &quot;64&quot;
 33) &quot;set-max-intset-entries&quot;
 34) &quot;512&quot;
 35) &quot;zset-max-ziplist-entries&quot;
 36) &quot;128&quot;
 37) &quot;zset-max-ziplist-value&quot;
 38) &quot;64&quot;
 39) &quot;hll-sparse-max-bytes&quot;
 40) &quot;3000&quot;
 41) &quot;lua-time-limit&quot;
 42) &quot;5000&quot;
 43) &quot;slowlog-log-slower-than&quot;
 44) &quot;10000&quot;
 45) &quot;latency-monitor-threshold&quot;
 46) &quot;0&quot;
 47) &quot;slowlog-max-len&quot;
 48) &quot;128&quot;
 49) &quot;port&quot;
 50) &quot;6379&quot;
 51) &quot;tcp-backlog&quot;
 52) &quot;511&quot;
 53) &quot;databases&quot;
 54) &quot;16&quot;
 55) &quot;repl-ping-slave-period&quot;
 56) &quot;10&quot;
 57) &quot;repl-timeout&quot;
 58) &quot;60&quot;
 59) &quot;repl-backlog-size&quot;
 60) &quot;1048576&quot;
 61) &quot;repl-backlog-ttl&quot;
 62) &quot;3600&quot;
 63) &quot;maxclients&quot;
 64) &quot;4064&quot;
 65) &quot;watchdog-period&quot;
 66) &quot;0&quot;
 67) &quot;slave-priority&quot;
 68) &quot;100&quot;
 69) &quot;min-slaves-to-write&quot;
 70) &quot;0&quot;
 71) &quot;min-slaves-max-lag&quot;
 72) &quot;10&quot;
 73) &quot;hz&quot;
 74) &quot;10&quot;
 75) &quot;no-appendfsync-on-rewrite&quot;
 76) &quot;no&quot;
 77) &quot;slave-serve-stale-data&quot;
 78) &quot;yes&quot;
 79) &quot;slave-read-only&quot;
 80) &quot;yes&quot;
 81) &quot;stop-writes-on-bgsave-error&quot;
 82) &quot;yes&quot;
 83) &quot;daemonize&quot;
 84) &quot;no&quot;
 85) &quot;rdbcompression&quot;
 86) &quot;yes&quot;
 87) &quot;rdbchecksum&quot;
 88) &quot;yes&quot;
 89) &quot;activerehashing&quot;
 90) &quot;yes&quot;
 91) &quot;repl-disable-tcp-nodelay&quot;
 92) &quot;no&quot;
 93) &quot;aof-rewrite-incremental-fsync&quot;
 94) &quot;yes&quot;
 95) &quot;appendonly&quot;
 96) &quot;no&quot;
 97) &quot;dir&quot;
 98) &quot;/home/deepak/Downloads/redis-2.8.13/src&quot;
 99) &quot;maxmemory-policy&quot;
100) &quot;volatile-lru&quot;
101) &quot;appendfsync&quot;
102) &quot;everysec&quot;
103) &quot;save&quot;
104) &quot;3600 1 300 100 60 10000&quot;
105) &quot;loglevel&quot;
106) &quot;notice&quot;
107) &quot;client-output-buffer-limit&quot;
108) &quot;normal 0 0 0 slave 268435456 67108864 60 pubsub 33554432 8388608 60&quot;
109) &quot;unixsocketperm&quot;
110) &quot;0&quot;
111) &quot;slaveof&quot;
112) &quot;&quot;
113) &quot;notify-keyspace-events&quot;
114) &quot;&quot;
115) &quot;bind&quot;
116) &quot;&quot;
</code></pre></div><hr> <h2 id="编辑配置"><a href="#编辑配置" class="header-anchor">#</a> 编辑配置</h2> <p>你可以通过修改 redis.conf 文件或使用 <strong>CONFIG set</strong> 命令来修改配置。</p> <h3 id="语法-2"><a href="#语法-2" class="header-anchor">#</a> 语法</h3> <p><strong>CONFIG SET</strong> 命令基本语法：</p> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; CONFIG SET CONFIG_SETTING_NAME NEW_CONFIG_VALUE
</code></pre></div><h3 id="实例-3"><a href="#实例-3" class="header-anchor">#</a> 实例</h3> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; CONFIG SET loglevel &quot;notice&quot;
OK
redis 127.0.0.1:6379&gt; CONFIG GET loglevel
 
1) &quot;loglevel&quot;
2) &quot;notice&quot;
</code></pre></div><hr> <h2 id="参数说明"><a href="#参数说明" class="header-anchor">#</a> 参数说明</h2> <p>redis.conf 配置项说明如下：</p> <ol><li>Redis默认不是以守护进程的方式运行，可以通过该配置项修改，使用yes启用守护进程</li></ol> <p><strong>daemonize no</strong></p> <ol start="2"><li>当Redis以守护进程方式运行时，Redis默认会把pid写入/var/run/redis.pid文件，可以通过pidfile指定</li></ol> <p><strong>pidfile /var/run/redis.pid</strong></p> <ol start="3"><li>指定Redis监听端口，默认端口为6379，作者在自己的一篇博文中解释了为什么选用6379作为默认端口，因为6379在手机按键上MERZ对应的号码，而MERZ取自意大利歌女Alessia Merz的名字</li></ol> <p><strong>port 6379</strong></p> <ol start="4"><li>绑定的主机地址</li></ol> <p><strong>bind 127.0.0.1</strong></p> <p>5.当 客户端闲置多长时间后关闭连接，如果指定为0，表示关闭该功能</p> <p><strong>timeout 300</strong></p> <ol start="6"><li>指定日志记录级别，Redis总共支持四个级别：debug、verbose、notice、warning，默认为verbose</li></ol> <p><strong>loglevel verbose</strong></p> <ol start="7"><li>日志记录方式，默认为标准输出，如果配置Redis为守护进程方式运行，而这里又配置为日志记录方式为标准输出，则日志将会发送给/dev/null</li></ol> <p><strong>logfile stdout</strong></p> <ol start="8"><li>设置数据库的数量，默认数据库为0，可以使用SELECT ``命令在连接上指定数据库id</li></ol> <p><strong>databases 16</strong></p> <ol start="9"><li>指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合</li></ol> <p><strong>save <code></code></strong></p> <p>Redis默认配置文件中提供了三个条件：</p> <p><strong>save 900 1</strong></p> <p><strong>save 300 10</strong></p> <p><strong>save 60 10000</strong></p> <p>分别表示900秒（15分钟）内有1个更改，300秒（5分钟）内有10个更改以及60秒内有10000个更改。</p> <ol start="10"><li>指定存储至本地数据库时是否压缩数据，默认为yes，Redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，但会导致数据库文件变的巨大</li></ol> <p><strong>rdbcompression yes</strong></p> <ol start="11"><li>指定本地数据库文件名，默认值为dump.rdb</li></ol> <p><strong>dbfilename dump.rdb</strong></p> <ol start="12"><li>指定本地数据库存放目录</li></ol> <p><strong>dir ./</strong></p> <ol start="13"><li>设置当本机为slav服务时，设置master服务的IP地址及端口，在Redis启动时，它会自动从master进行数据同步</li></ol> <p><strong>slaveof <code></code></strong></p> <ol start="14"><li>当master服务设置了密码保护时，slav服务连接master的密码</li></ol> <p><strong>masterauth ``</strong></p> <ol start="15"><li>设置Redis连接密码，如果配置了连接密码，客户端在连接Redis时需要通过AUTH ``命令提供密码，默认关闭</li></ol> <p><strong>requirepass foobared</strong></p> <ol start="16"><li>设置同一时间最大客户端连接数，默认无限制，Redis可以同时打开的客户端连接数为Redis进程可以打开的最大文件描述符数，如果设置 maxclients 0，表示不作限制。当客户端连接数到达限制时，Redis会关闭新的连接并向客户端返回max number of clients reached错误信息</li></ol> <p><strong>maxclients 128</strong></p> <ol start="17"><li>指定Redis最大内存限制，Redis在启动时会把数据加载到内存中，达到最大内存后，Redis会先尝试清除已到期或即将到期的Key，当此方法处理 后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作。Redis新的vm机制，会把Key存放内存，Value会存放在swap区</li></ol> <p><strong>maxmemory ``</strong></p> <ol start="18"><li>指定是否在每次更新操作后进行日志记录，Redis在默认情况下是异步的把数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失。因为 redis本身同步数据文件是按上面save条件来同步的，所以有的数据会在一段时间内只存在于内存中。默认为no</li></ol> <p><strong>appendonly no</strong></p> <ol start="19"><li>指定更新日志文件名，默认为appendonly.aof</li></ol> <p><strong>appendfilename appendonly.aof</strong></p> <ol start="20"><li>指定更新日志条件，共有3个可选值：   <strong>no</strong>：表示等操作系统进行数据缓存同步到磁盘（快）   <strong>always</strong>：表示每次更新操作后手动调用fsync()将数据写到磁盘（慢，安全）   <strong>everysec</strong>：表示每秒同步一次（折衷，默认值）</li></ol> <p><strong>appendfsync everysec</strong></p> <ol start="21"><li>指定是否启用虚拟内存机制，默认值为no，简单的介绍一下，VM机制将数据分页存放，由Redis将访问量较少的页即冷数据swap到磁盘上，访问多的页面由磁盘自动换出到内存中（在后面的文章我会仔细分析Redis的VM机制）</li></ol> <p><strong>vm-enabled no</strong></p> <ol start="22"><li>虚拟内存文件路径，默认值为/tmp/redis.swap，不可多个Redis实例共享</li></ol> <p><strong>vm-swap-file /tmp/redis.swap</strong></p> <ol start="23"><li>将所有大于vm-max-memory的数据存入虚拟内存,无论vm-max-memory设置多小,所有索引数据都是内存存储的(Redis的索引数据 就是keys),也就是说,当vm-max-memory设置为0的时候,其实是所有value都存在于磁盘。默认值为0</li></ol> <p><strong>vm-max-memory 0</strong></p> <ol start="24"><li>Redis swap文件分成了很多的page，一个对象可以保存在多个page上面，但一个page上不能被多个对象共享，vm-page-size是要根据存储的 数据大小来设定的，作者建议如果存储很多小对象，page大小最好设置为32或者64bytes；如果存储很大大对象，则可以使用更大的page，如果不 确定，就使用默认值</li></ol> <p><strong>vm-page-size 32</strong></p> <ol start="25"><li>设置swap文件中的page数量，由于页表（一种表示页面空闲或使用的bitmap）是在放在内存中的，，在磁盘上每8个pages将消耗1byte的内存。</li></ol> <p><strong>vm-pages 134217728</strong></p> <ol start="26"><li>设置访问swap文件的线程数,最好不要超过机器的核数,如果设置为0,那么所有对swap文件的操作都是串行的，可能会造成比较长时间的延迟。默认值为4</li></ol> <p><strong>vm-max-threads 4</strong></p> <ol start="27"><li>设置在向客户端应答时，是否把较小的包合并为一个包发送，默认为开启</li></ol> <p><strong>glueoutputbuf yes</strong></p> <ol start="28"><li>指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法</li></ol> <p><strong>hash-max-zipmap-entries 64</strong></p> <p><strong>hash-max-zipmap-value 512</strong></p> <ol start="29"><li>指定是否激活重置哈希，默认为开启（后面在介绍Redis的哈希算法时具体介绍）</li></ol> <p><strong>activerehashing yes</strong></p> <ol start="30"><li>指定包含其它的配置文件，可以在同一主机上多个Redis实例之间使用同一份配置文件，而同时各个实例又拥有自己的特定配置文件</li></ol> <p><strong>include /path/to/local.conf</strong></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/redis/Redis安装.html" class="prev">
        Redis 安装
      </a></span> <span class="next"><a href="/redis/Redis数据类型.html">
        Redis 数据类型
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.b6fcbba0.js" defer></script><script src="/assets/js/2.0769d472.js" defer></script><script src="/assets/js/71.30c55144.js" defer></script>
  </body>
</html>
