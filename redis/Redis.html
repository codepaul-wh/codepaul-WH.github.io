<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis 简介 |  </title>
    <meta name="description" content=" ">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/img/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.6d3e66e0.css" as="style"><link rel="preload" href="/assets/js/app.ab60294b.js" as="script"><link rel="preload" href="/assets/js/2.0769d472.js" as="script"><link rel="preload" href="/assets/js/50.c5a763c1.js" as="script"><link rel="prefetch" href="/assets/js/10.d5b488e5.js"><link rel="prefetch" href="/assets/js/100.b05fe937.js"><link rel="prefetch" href="/assets/js/101.c78118ad.js"><link rel="prefetch" href="/assets/js/11.ba7209bc.js"><link rel="prefetch" href="/assets/js/12.7eb2b639.js"><link rel="prefetch" href="/assets/js/13.319a2e91.js"><link rel="prefetch" href="/assets/js/14.fe83290c.js"><link rel="prefetch" href="/assets/js/15.8a7ec64a.js"><link rel="prefetch" href="/assets/js/16.41f2dd98.js"><link rel="prefetch" href="/assets/js/17.904bc325.js"><link rel="prefetch" href="/assets/js/18.7a6246f7.js"><link rel="prefetch" href="/assets/js/19.84ab8dd3.js"><link rel="prefetch" href="/assets/js/20.04c09d1c.js"><link rel="prefetch" href="/assets/js/21.e75a2f46.js"><link rel="prefetch" href="/assets/js/22.a14b1840.js"><link rel="prefetch" href="/assets/js/23.799a37e9.js"><link rel="prefetch" href="/assets/js/24.c3eada22.js"><link rel="prefetch" href="/assets/js/25.4f11ed3d.js"><link rel="prefetch" href="/assets/js/26.375a9c03.js"><link rel="prefetch" href="/assets/js/27.bc7c4ae2.js"><link rel="prefetch" href="/assets/js/28.2250b95c.js"><link rel="prefetch" href="/assets/js/29.f568d59e.js"><link rel="prefetch" href="/assets/js/3.79868d1c.js"><link rel="prefetch" href="/assets/js/30.f7eb4129.js"><link rel="prefetch" href="/assets/js/31.94b316c6.js"><link rel="prefetch" href="/assets/js/32.428d0721.js"><link rel="prefetch" href="/assets/js/33.6064d0ca.js"><link rel="prefetch" href="/assets/js/34.711c8d67.js"><link rel="prefetch" href="/assets/js/35.2d341b53.js"><link rel="prefetch" href="/assets/js/36.d44bf3ce.js"><link rel="prefetch" href="/assets/js/37.b6844632.js"><link rel="prefetch" href="/assets/js/38.80d006c6.js"><link rel="prefetch" href="/assets/js/39.f7bee99d.js"><link rel="prefetch" href="/assets/js/4.973e9025.js"><link rel="prefetch" href="/assets/js/40.0239e47a.js"><link rel="prefetch" href="/assets/js/41.ae2fbfaa.js"><link rel="prefetch" href="/assets/js/42.dfd29a6a.js"><link rel="prefetch" href="/assets/js/43.683daf3c.js"><link rel="prefetch" href="/assets/js/44.562e4097.js"><link rel="prefetch" href="/assets/js/45.95b98fcb.js"><link rel="prefetch" href="/assets/js/46.d96aa487.js"><link rel="prefetch" href="/assets/js/47.2aca851e.js"><link rel="prefetch" href="/assets/js/48.814b9e24.js"><link rel="prefetch" href="/assets/js/49.fe2be804.js"><link rel="prefetch" href="/assets/js/5.336b97a1.js"><link rel="prefetch" href="/assets/js/51.41e24a47.js"><link rel="prefetch" href="/assets/js/52.6c448e60.js"><link rel="prefetch" href="/assets/js/53.8c0b5684.js"><link rel="prefetch" href="/assets/js/54.8f76ab97.js"><link rel="prefetch" href="/assets/js/55.a15238f6.js"><link rel="prefetch" href="/assets/js/56.385a70ef.js"><link rel="prefetch" href="/assets/js/57.fe5f9465.js"><link rel="prefetch" href="/assets/js/58.348704b8.js"><link rel="prefetch" href="/assets/js/59.8074fc81.js"><link rel="prefetch" href="/assets/js/6.cdc6003c.js"><link rel="prefetch" href="/assets/js/60.1886e5a2.js"><link rel="prefetch" href="/assets/js/61.8cdce743.js"><link rel="prefetch" href="/assets/js/62.ccfad9c2.js"><link rel="prefetch" href="/assets/js/63.16b1771b.js"><link rel="prefetch" href="/assets/js/64.ab84024e.js"><link rel="prefetch" href="/assets/js/65.5d7c3b7a.js"><link rel="prefetch" href="/assets/js/66.d8591a18.js"><link rel="prefetch" href="/assets/js/67.73456f7e.js"><link rel="prefetch" href="/assets/js/68.f481f8f3.js"><link rel="prefetch" href="/assets/js/69.96f25530.js"><link rel="prefetch" href="/assets/js/7.46997b0a.js"><link rel="prefetch" href="/assets/js/70.0ab0d1fd.js"><link rel="prefetch" href="/assets/js/71.dd8facc4.js"><link rel="prefetch" href="/assets/js/72.ef52962d.js"><link rel="prefetch" href="/assets/js/73.0e844bfe.js"><link rel="prefetch" href="/assets/js/74.a3f222d9.js"><link rel="prefetch" href="/assets/js/75.cbbf1e57.js"><link rel="prefetch" href="/assets/js/76.79bfac66.js"><link rel="prefetch" href="/assets/js/77.536742b4.js"><link rel="prefetch" href="/assets/js/78.44d6cb00.js"><link rel="prefetch" href="/assets/js/79.2dc3f78e.js"><link rel="prefetch" href="/assets/js/8.2825b7c8.js"><link rel="prefetch" href="/assets/js/80.30f2b7e8.js"><link rel="prefetch" href="/assets/js/81.ce007e74.js"><link rel="prefetch" href="/assets/js/82.7f8e37af.js"><link rel="prefetch" href="/assets/js/83.201b9f31.js"><link rel="prefetch" href="/assets/js/84.8e750285.js"><link rel="prefetch" href="/assets/js/85.b564c207.js"><link rel="prefetch" href="/assets/js/86.85da9ef3.js"><link rel="prefetch" href="/assets/js/87.61865fb9.js"><link rel="prefetch" href="/assets/js/88.2c3e8d72.js"><link rel="prefetch" href="/assets/js/89.2b99140f.js"><link rel="prefetch" href="/assets/js/9.2a76fd8c.js"><link rel="prefetch" href="/assets/js/90.6ede089c.js"><link rel="prefetch" href="/assets/js/91.4f784eb3.js"><link rel="prefetch" href="/assets/js/92.503a04a8.js"><link rel="prefetch" href="/assets/js/93.668a1616.js"><link rel="prefetch" href="/assets/js/94.78890e02.js"><link rel="prefetch" href="/assets/js/95.4eafa307.js"><link rel="prefetch" href="/assets/js/96.8be342d2.js"><link rel="prefetch" href="/assets/js/97.cff73008.js"><link rel="prefetch" href="/assets/js/98.2d7c9205.js"><link rel="prefetch" href="/assets/js/99.4e9998dc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6d3e66e0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/favicon.png" alt=" " class="logo"> <span class="site-name can-hide"> </span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/disclaimer/" class="nav-link">
  免责声明
</a></div><div class="nav-item"><a href="https://github.com/codepaul-wh/ErrorDescription" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/disclaimer/" class="nav-link">
  免责声明
</a></div><div class="nav-item"><a href="https://github.com/codepaul-wh/ErrorDescription" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Redis 简介</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/redis/Redis.html#redis-简介" class="sidebar-link">Redis 简介</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis-优势" class="sidebar-link">Redis 优势</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis与其他key-value存储有什么不同？" class="sidebar-link">Redis与其他key-value存储有什么不同？</a></li></ul></li><li><a href="/redis/Redis.html#redis-安装" class="sidebar-link">Redis 安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#window-下安装" class="sidebar-link">Window 下安装</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#linux-下安装" class="sidebar-link">Linux 下安装</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#ubuntu-下安装" class="sidebar-link">Ubuntu 下安装</a></li></ul></li><li><a href="/redis/Redis.html#redis-配置" class="sidebar-link">Redis 配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#编辑配置" class="sidebar-link">编辑配置</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#参数说明" class="sidebar-link">参数说明</a></li></ul></li><li><a href="/redis/Redis.html#redis-数据类型" class="sidebar-link">Redis 数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#string（字符串）" class="sidebar-link">String（字符串）</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#hash（哈希）" class="sidebar-link">Hash（哈希）</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#list（列表）" class="sidebar-link">List（列表）</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#set（集合）" class="sidebar-link">Set（集合）</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#zset-sorted-set：有序集合" class="sidebar-link">zset(sorted set：有序集合)</a></li></ul></li><li><a href="/redis/Redis.html#redis-命令" class="sidebar-link">Redis 命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#在远程服务上执行命令" class="sidebar-link">在远程服务上执行命令</a></li></ul></li><li><a href="/redis/Redis.html#redis-键-key" class="sidebar-link">Redis 键(key)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis-keys-命令" class="sidebar-link">Redis keys 命令</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis的所有命令" class="sidebar-link">Redis的所有命令</a></li></ul></li><li><a href="/redis/Redis.html#redis-字符串-string" class="sidebar-link">Redis 字符串(String)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis-字符串命令" class="sidebar-link">Redis 字符串命令</a></li></ul></li><li><a href="/redis/Redis.html#redis-哈希-hash" class="sidebar-link">Redis 哈希(Hash)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis-hash-命令" class="sidebar-link">Redis hash 命令</a></li></ul></li><li><a href="/redis/Redis.html#redis-列表-list" class="sidebar-link">Redis 列表(List)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis-列表命令" class="sidebar-link">Redis 列表命令</a></li></ul></li><li><a href="/redis/Redis.html#redis-集合-set" class="sidebar-link">Redis 集合(Set)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis-集合命令" class="sidebar-link">Redis 集合命令</a></li></ul></li><li><a href="/redis/Redis.html#redis-有序集合-sorted-set" class="sidebar-link">Redis 有序集合(sorted set)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis-有序集合命令" class="sidebar-link">Redis 有序集合命令</a></li></ul></li><li><a href="/redis/Redis.html#redis-hyperloglog" class="sidebar-link">Redis HyperLogLog</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#什么是基数" class="sidebar-link">什么是基数?</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#实例-17" class="sidebar-link">实例</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis-hyperloglog-命令" class="sidebar-link">Redis HyperLogLog 命令</a></li></ul></li><li><a href="/redis/Redis.html#redis-发布订阅" class="sidebar-link">Redis 发布订阅</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#实例-18" class="sidebar-link">实例</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis-发布订阅命令" class="sidebar-link">Redis 发布订阅命令</a></li></ul></li><li><a href="/redis/Redis.html#redis-事务" class="sidebar-link">Redis 事务</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#实例-19" class="sidebar-link">实例</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis-事务命令" class="sidebar-link">Redis 事务命令</a></li></ul></li><li><a href="/redis/Redis.html#redis-脚本" class="sidebar-link">Redis 脚本</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis-脚本命令" class="sidebar-link">Redis 脚本命令</a></li></ul></li><li><a href="/redis/Redis.html#redis-连接" class="sidebar-link">Redis 连接</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis-连接命令" class="sidebar-link">Redis 连接命令</a></li></ul></li><li><a href="/redis/Redis.html#redis-服务器" class="sidebar-link">Redis 服务器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis-服务器命令" class="sidebar-link">Redis 服务器命令</a></li></ul></li><li><a href="/redis/Redis.html#redis-数据备份与恢复" class="sidebar-link">Redis 数据备份与恢复</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#恢复数据" class="sidebar-link">恢复数据</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#bgsave" class="sidebar-link">Bgsave</a></li></ul></li><li><a href="/redis/Redis.html#redis-安全" class="sidebar-link">Redis 安全</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/redis/Redis.html#redis-性能测试" class="sidebar-link">Redis 性能测试</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/redis/Redis.html#redis-客户端连接" class="sidebar-link">Redis 客户端连接</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#最大连接数" class="sidebar-link">最大连接数</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#客户端命令" class="sidebar-link">客户端命令</a></li></ul></li><li><a href="/redis/Redis.html#redis-管道技术" class="sidebar-link">Redis 管道技术</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis-管道技术-2" class="sidebar-link">Redis 管道技术</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#管道技术的优势" class="sidebar-link">管道技术的优势</a></li></ul></li><li><a href="/redis/Redis.html#redis-分区" class="sidebar-link">Redis 分区</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#分区类型" class="sidebar-link">分区类型</a></li></ul></li><li><a href="/redis/Redis.html#java-使用-redis" class="sidebar-link">Java 使用 Redis</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#连接到-redis-服务" class="sidebar-link">连接到 redis 服务</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis-java-string-字符串-实例" class="sidebar-link">Redis Java String(字符串) 实例</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis-java-list-列表-实例" class="sidebar-link">Redis Java List(列表) 实例</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis-java-keys-实例" class="sidebar-link">Redis Java Keys 实例</a></li></ul></li><li><a href="/redis/Redis.html#php-使用-redis" class="sidebar-link">PHP 使用 Redis</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis/Redis.html#安装-2" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#连接到-redis-服务-2" class="sidebar-link">连接到 redis 服务</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis-php-string-字符串-实例" class="sidebar-link">Redis PHP String(字符串) 实例</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis-php-list-列表-实例" class="sidebar-link">Redis PHP List(列表) 实例</a></li><li class="sidebar-sub-header"><a href="/redis/Redis.html#redis-php-keys-实例" class="sidebar-link">Redis PHP Keys 实例</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="redis-简介"><a href="#redis-简介" class="header-anchor">#</a> Redis 简介</h2> <p>Redis 是完全开源免费的，遵守BSD协议，是一个高性能的key-value数据库。</p> <p>Redis 与其他 key - value 缓存产品有以下三个特点：</p> <ul><li>Redis支持数据的持久化，可以将内存中的数据保持在磁盘中，重启的时候可以再次加载进行使用。</li> <li>Redis不仅仅支持简单的key-value类型的数据，同时还提供list，set，zset，hash等数据结构的存储。</li> <li>Redis支持数据的备份，即master-slave模式的数据备份。</li></ul> <hr> <h3 id="redis-优势"><a href="#redis-优势" class="header-anchor">#</a> Redis 优势</h3> <ul><li>性能极高 – Redis能读的速度是110000次/s,写的速度是81000次/s 。</li> <li>丰富的数据类型 – Redis支持二进制案例的 Strings, Lists, Hashes, Sets 及 Ordered Sets 数据类型操作。</li> <li>原子 – Redis的所有操作都是原子性的，同时Redis还支持对几个操作全并后的原子性执行。</li> <li>丰富的特性 – Redis还支持 publish/subscribe, 通知, key 过期等等特性。</li></ul> <hr> <h3 id="redis与其他key-value存储有什么不同？"><a href="#redis与其他key-value存储有什么不同？" class="header-anchor">#</a> Redis与其他key-value存储有什么不同？</h3> <ul><li>Redis有着更为复杂的数据结构并且提供对他们的原子性操作，这是一个不同于其他数据库的进化路径。Redis的数据类型都是基于基本数据结构的同时对程序员透明，无需进行额外的抽象。</li> <li>Redis运行在内存中但是可以持久化到磁盘，所以在对不同数据集进行高速读写时需要权衡内存，应为数据量不能大于硬件内存。在内存数据库方面的另一个优点是， 相比在磁盘上相同的复杂的数据结构，在内存中操作起来非常简单，这样Redis可以做很多内部复杂性很强的事情。 同时，在磁盘格式方面他们是紧凑的以追加的方式产生的，因为他们并不需要进行随机访问。</li></ul> <h2 id="redis-安装"><a href="#redis-安装" class="header-anchor">#</a> Redis 安装</h2> <h3 id="window-下安装"><a href="#window-下安装" class="header-anchor">#</a> Window 下安装</h3> <p>**下载地址：**https://github.com/dmajkic/redis/downloads。</p> <p>下载到的Redis支持32bit和64bit。根据自己实际情况选择，将64bit的内容cp到自定义盘符安装目录取名redis。 如 C:\reids</p> <p>打开一个cmd窗口 使用cd命令切换目录到 C:\redis 运行 <strong>redis-server.exe redis.conf</strong> 。</p> <p>如果想方便的话，可以把redis的路径加到系统的环境变量里，这样就省得再输路径了，后面的那个redis.conf可以省略，如果省略，会启用默认的。输入之后，会显示如下界面：</p> <p><img src="https://www.redis.net.cn/Image/redis-win.jpg" alt="Redis 安装"></p> <p>这时候另启一个cmd窗口，原来的不要关闭，不然就无法访问服务端了。</p> <p>切换到redis目录下运行 <strong>redis-cli.exe -h 127.0.0.1 -p 6379</strong> 。</p> <p>设置键值对 <strong>set myKey abc</strong></p> <p>取出键值对 <strong>get myKey</strong></p> <p><img src="https://www.redis.net.cn/Image/redis-win2.jpg" alt="Redis 安装"></p> <hr> <h3 id="linux-下安装"><a href="#linux-下安装" class="header-anchor">#</a> Linux 下安装</h3> <p>**下载地址：**http://www.redis.net.cn/download/，下载最新文档版本。</p> <p>本教程使用的最新文档版本为 2.8.17，下载并安装：</p> <div class="language- extra-class"><pre class="language-text"><code>$ wget http://download.redis.io/releases/redis-2.8.17.tar.gz
$ tar xzf redis-2.8.17.tar.gz
$ cd redis-2.8.17
$ make
</code></pre></div><p>make完后 redis-2.8.17目录下会出现编译后的redis服务程序redis-server,还有用于测试的客户端程序redis-cli</p> <p>下面启动redis服务.</p> <div class="language- extra-class"><pre class="language-text"><code>$ ./redis-server
</code></pre></div><p>注意这种方式启动redis 使用的是默认配置。也可以通过启动参数告诉redis使用指定配置文件使用下面命令启动。</p> <div class="language- extra-class"><pre class="language-text"><code>$ ./redis-server redis.conf
</code></pre></div><p>redis.conf是一个默认的配置文件。我们可以根据需要使用自己的配置文件。</p> <p>启动redis服务进程后，就可以使用测试客户端程序redis-cli和redis服务交互了。 比如：</p> <div class="language- extra-class"><pre class="language-text"><code>$ ./redis-cliredis&gt; set foo barOKredis&gt; get foo&quot;bar&quot;
</code></pre></div><hr> <h3 id="ubuntu-下安装"><a href="#ubuntu-下安装" class="header-anchor">#</a> Ubuntu 下安装</h3> <p>在 Ubuntu 系统安装 Redi 可以使用以下命令:</p> <div class="language- extra-class"><pre class="language-text"><code>$sudo apt-get update$sudo apt-get install redis-server
</code></pre></div><h4 id="启动-redis"><a href="#启动-redis" class="header-anchor">#</a> 启动 Redis</h4> <div class="language- extra-class"><pre class="language-text"><code>$redis-server
</code></pre></div><h4 id="查看-redis-是否启动？"><a href="#查看-redis-是否启动？" class="header-anchor">#</a> 查看 redis 是否启动？</h4> <div class="language- extra-class"><pre class="language-text"><code>$redis-cli
</code></pre></div><p>以上命令将打开以下终端：</p> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt;
</code></pre></div><p>127.0.0.1 是本机 IP ，6379 是 redis 服务端口。现在我们输入 PING 命令。</p> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; pingPONG
</code></pre></div><p>以上说明我们已经成功安装了redis。</p> <h2 id="redis-配置"><a href="#redis-配置" class="header-anchor">#</a> Redis 配置</h2> <p>Redis 的配置文件位于 Redis 安装目录下，文件名为 redis.conf。</p> <p>你可以通过 <strong>CONFIG</strong> 命令查看或设置配置项。</p> <hr> <h4 id="语法"><a href="#语法" class="header-anchor">#</a> 语法</h4> <p>Redis CONFIG 命令格式如下：</p> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; CONFIG GET CONFIG_SETTING_NAME
</code></pre></div><h4 id="实例"><a href="#实例" class="header-anchor">#</a> 实例</h4> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; CONFIG GET loglevel 1) &quot;loglevel&quot;2) &quot;notice&quot;
</code></pre></div><p>使用 ***** 号获取所有配置项：</p> <h4 id="实例-2"><a href="#实例-2" class="header-anchor">#</a> 实例</h4> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; CONFIG GET *
 
  1) &quot;dbfilename&quot;
  2) &quot;dump.rdb&quot;
  3) &quot;requirepass&quot;
  4) &quot;&quot;
  5) &quot;masterauth&quot;
  6) &quot;&quot;
  7) &quot;unixsocket&quot;
  8) &quot;&quot;
  9) &quot;logfile&quot;
 10) &quot;&quot;
 11) &quot;pidfile&quot;
 12) &quot;/var/run/redis.pid&quot;
 13) &quot;maxmemory&quot;
 14) &quot;0&quot;
 15) &quot;maxmemory-samples&quot;
 16) &quot;3&quot;
 17) &quot;timeout&quot;
 18) &quot;0&quot;
 19) &quot;tcp-keepalive&quot;
 20) &quot;0&quot;
 21) &quot;auto-aof-rewrite-percentage&quot;
 22) &quot;100&quot;
 23) &quot;auto-aof-rewrite-min-size&quot;
 24) &quot;67108864&quot;
 25) &quot;hash-max-ziplist-entries&quot;
 26) &quot;512&quot;
 27) &quot;hash-max-ziplist-value&quot;
 28) &quot;64&quot;
 29) &quot;list-max-ziplist-entries&quot;
 30) &quot;512&quot;
 31) &quot;list-max-ziplist-value&quot;
 32) &quot;64&quot;
 33) &quot;set-max-intset-entries&quot;
 34) &quot;512&quot;
 35) &quot;zset-max-ziplist-entries&quot;
 36) &quot;128&quot;
 37) &quot;zset-max-ziplist-value&quot;
 38) &quot;64&quot;
 39) &quot;hll-sparse-max-bytes&quot;
 40) &quot;3000&quot;
 41) &quot;lua-time-limit&quot;
 42) &quot;5000&quot;
 43) &quot;slowlog-log-slower-than&quot;
 44) &quot;10000&quot;
 45) &quot;latency-monitor-threshold&quot;
 46) &quot;0&quot;
 47) &quot;slowlog-max-len&quot;
 48) &quot;128&quot;
 49) &quot;port&quot;
 50) &quot;6379&quot;
 51) &quot;tcp-backlog&quot;
 52) &quot;511&quot;
 53) &quot;databases&quot;
 54) &quot;16&quot;
 55) &quot;repl-ping-slave-period&quot;
 56) &quot;10&quot;
 57) &quot;repl-timeout&quot;
 58) &quot;60&quot;
 59) &quot;repl-backlog-size&quot;
 60) &quot;1048576&quot;
 61) &quot;repl-backlog-ttl&quot;
 62) &quot;3600&quot;
 63) &quot;maxclients&quot;
 64) &quot;4064&quot;
 65) &quot;watchdog-period&quot;
 66) &quot;0&quot;
 67) &quot;slave-priority&quot;
 68) &quot;100&quot;
 69) &quot;min-slaves-to-write&quot;
 70) &quot;0&quot;
 71) &quot;min-slaves-max-lag&quot;
 72) &quot;10&quot;
 73) &quot;hz&quot;
 74) &quot;10&quot;
 75) &quot;no-appendfsync-on-rewrite&quot;
 76) &quot;no&quot;
 77) &quot;slave-serve-stale-data&quot;
 78) &quot;yes&quot;
 79) &quot;slave-read-only&quot;
 80) &quot;yes&quot;
 81) &quot;stop-writes-on-bgsave-error&quot;
 82) &quot;yes&quot;
 83) &quot;daemonize&quot;
 84) &quot;no&quot;
 85) &quot;rdbcompression&quot;
 86) &quot;yes&quot;
 87) &quot;rdbchecksum&quot;
 88) &quot;yes&quot;
 89) &quot;activerehashing&quot;
 90) &quot;yes&quot;
 91) &quot;repl-disable-tcp-nodelay&quot;
 92) &quot;no&quot;
 93) &quot;aof-rewrite-incremental-fsync&quot;
 94) &quot;yes&quot;
 95) &quot;appendonly&quot;
 96) &quot;no&quot;
 97) &quot;dir&quot;
 98) &quot;/home/deepak/Downloads/redis-2.8.13/src&quot;
 99) &quot;maxmemory-policy&quot;
100) &quot;volatile-lru&quot;
101) &quot;appendfsync&quot;
102) &quot;everysec&quot;
103) &quot;save&quot;
104) &quot;3600 1 300 100 60 10000&quot;
105) &quot;loglevel&quot;
106) &quot;notice&quot;
107) &quot;client-output-buffer-limit&quot;
108) &quot;normal 0 0 0 slave 268435456 67108864 60 pubsub 33554432 8388608 60&quot;
109) &quot;unixsocketperm&quot;
110) &quot;0&quot;
111) &quot;slaveof&quot;
112) &quot;&quot;
113) &quot;notify-keyspace-events&quot;
114) &quot;&quot;
115) &quot;bind&quot;
116) &quot;&quot;
</code></pre></div><hr> <h3 id="编辑配置"><a href="#编辑配置" class="header-anchor">#</a> 编辑配置</h3> <p>你可以通过修改 redis.conf 文件或使用 <strong>CONFIG set</strong> 命令来修改配置。</p> <h4 id="语法-2"><a href="#语法-2" class="header-anchor">#</a> 语法</h4> <p><strong>CONFIG SET</strong> 命令基本语法：</p> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; CONFIG SET CONFIG_SETTING_NAME NEW_CONFIG_VALUE
</code></pre></div><h4 id="实例-3"><a href="#实例-3" class="header-anchor">#</a> 实例</h4> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; CONFIG SET loglevel &quot;notice&quot;
OK
redis 127.0.0.1:6379&gt; CONFIG GET loglevel
 
1) &quot;loglevel&quot;
2) &quot;notice&quot;
</code></pre></div><hr> <h3 id="参数说明"><a href="#参数说明" class="header-anchor">#</a> 参数说明</h3> <p>redis.conf 配置项说明如下：</p> <ol><li>Redis默认不是以守护进程的方式运行，可以通过该配置项修改，使用yes启用守护进程</li></ol> <p><strong>daemonize no</strong></p> <ol start="2"><li>当Redis以守护进程方式运行时，Redis默认会把pid写入/var/run/redis.pid文件，可以通过pidfile指定</li></ol> <p><strong>pidfile /var/run/redis.pid</strong></p> <ol start="3"><li>指定Redis监听端口，默认端口为6379，作者在自己的一篇博文中解释了为什么选用6379作为默认端口，因为6379在手机按键上MERZ对应的号码，而MERZ取自意大利歌女Alessia Merz的名字</li></ol> <p><strong>port 6379</strong></p> <ol start="4"><li>绑定的主机地址</li></ol> <p><strong>bind 127.0.0.1</strong></p> <p>5.当 客户端闲置多长时间后关闭连接，如果指定为0，表示关闭该功能</p> <p><strong>timeout 300</strong></p> <ol start="6"><li>指定日志记录级别，Redis总共支持四个级别：debug、verbose、notice、warning，默认为verbose</li></ol> <p><strong>loglevel verbose</strong></p> <ol start="7"><li>日志记录方式，默认为标准输出，如果配置Redis为守护进程方式运行，而这里又配置为日志记录方式为标准输出，则日志将会发送给/dev/null</li></ol> <p><strong>logfile stdout</strong></p> <ol start="8"><li>设置数据库的数量，默认数据库为0，可以使用SELECT ``命令在连接上指定数据库id</li></ol> <p><strong>databases 16</strong></p> <ol start="9"><li>指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合</li></ol> <p><strong>save <code></code></strong></p> <p>Redis默认配置文件中提供了三个条件：</p> <p><strong>save 900 1</strong></p> <p><strong>save 300 10</strong></p> <p><strong>save 60 10000</strong></p> <p>分别表示900秒（15分钟）内有1个更改，300秒（5分钟）内有10个更改以及60秒内有10000个更改。</p> <ol start="10"><li>指定存储至本地数据库时是否压缩数据，默认为yes，Redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，但会导致数据库文件变的巨大</li></ol> <p><strong>rdbcompression yes</strong></p> <ol start="11"><li>指定本地数据库文件名，默认值为dump.rdb</li></ol> <p><strong>dbfilename dump.rdb</strong></p> <ol start="12"><li>指定本地数据库存放目录</li></ol> <p><strong>dir ./</strong></p> <ol start="13"><li>设置当本机为slav服务时，设置master服务的IP地址及端口，在Redis启动时，它会自动从master进行数据同步</li></ol> <p><strong>slaveof <code></code></strong></p> <ol start="14"><li>当master服务设置了密码保护时，slav服务连接master的密码</li></ol> <p><strong>masterauth ``</strong></p> <ol start="15"><li>设置Redis连接密码，如果配置了连接密码，客户端在连接Redis时需要通过AUTH ``命令提供密码，默认关闭</li></ol> <p><strong>requirepass foobared</strong></p> <ol start="16"><li>设置同一时间最大客户端连接数，默认无限制，Redis可以同时打开的客户端连接数为Redis进程可以打开的最大文件描述符数，如果设置 maxclients 0，表示不作限制。当客户端连接数到达限制时，Redis会关闭新的连接并向客户端返回max number of clients reached错误信息</li></ol> <p><strong>maxclients 128</strong></p> <ol start="17"><li>指定Redis最大内存限制，Redis在启动时会把数据加载到内存中，达到最大内存后，Redis会先尝试清除已到期或即将到期的Key，当此方法处理 后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作。Redis新的vm机制，会把Key存放内存，Value会存放在swap区</li></ol> <p><strong>maxmemory ``</strong></p> <ol start="18"><li>指定是否在每次更新操作后进行日志记录，Redis在默认情况下是异步的把数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失。因为 redis本身同步数据文件是按上面save条件来同步的，所以有的数据会在一段时间内只存在于内存中。默认为no</li></ol> <p><strong>appendonly no</strong></p> <ol start="19"><li>指定更新日志文件名，默认为appendonly.aof</li></ol> <p><strong>appendfilename appendonly.aof</strong></p> <ol start="20"><li>指定更新日志条件，共有3个可选值：   <strong>no</strong>：表示等操作系统进行数据缓存同步到磁盘（快）   <strong>always</strong>：表示每次更新操作后手动调用fsync()将数据写到磁盘（慢，安全）   <strong>everysec</strong>：表示每秒同步一次（折衷，默认值）</li></ol> <p><strong>appendfsync everysec</strong></p> <ol start="21"><li>指定是否启用虚拟内存机制，默认值为no，简单的介绍一下，VM机制将数据分页存放，由Redis将访问量较少的页即冷数据swap到磁盘上，访问多的页面由磁盘自动换出到内存中（在后面的文章我会仔细分析Redis的VM机制）</li></ol> <p><strong>vm-enabled no</strong></p> <ol start="22"><li>虚拟内存文件路径，默认值为/tmp/redis.swap，不可多个Redis实例共享</li></ol> <p><strong>vm-swap-file /tmp/redis.swap</strong></p> <ol start="23"><li>将所有大于vm-max-memory的数据存入虚拟内存,无论vm-max-memory设置多小,所有索引数据都是内存存储的(Redis的索引数据 就是keys),也就是说,当vm-max-memory设置为0的时候,其实是所有value都存在于磁盘。默认值为0</li></ol> <p><strong>vm-max-memory 0</strong></p> <ol start="24"><li>Redis swap文件分成了很多的page，一个对象可以保存在多个page上面，但一个page上不能被多个对象共享，vm-page-size是要根据存储的 数据大小来设定的，作者建议如果存储很多小对象，page大小最好设置为32或者64bytes；如果存储很大大对象，则可以使用更大的page，如果不 确定，就使用默认值</li></ol> <p><strong>vm-page-size 32</strong></p> <ol start="25"><li>设置swap文件中的page数量，由于页表（一种表示页面空闲或使用的bitmap）是在放在内存中的，，在磁盘上每8个pages将消耗1byte的内存。</li></ol> <p><strong>vm-pages 134217728</strong></p> <ol start="26"><li>设置访问swap文件的线程数,最好不要超过机器的核数,如果设置为0,那么所有对swap文件的操作都是串行的，可能会造成比较长时间的延迟。默认值为4</li></ol> <p><strong>vm-max-threads 4</strong></p> <ol start="27"><li>设置在向客户端应答时，是否把较小的包合并为一个包发送，默认为开启</li></ol> <p><strong>glueoutputbuf yes</strong></p> <ol start="28"><li>指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法</li></ol> <p><strong>hash-max-zipmap-entries 64</strong></p> <p><strong>hash-max-zipmap-value 512</strong></p> <ol start="29"><li>指定是否激活重置哈希，默认为开启（后面在介绍Redis的哈希算法时具体介绍）</li></ol> <p><strong>activerehashing yes</strong></p> <ol start="30"><li>指定包含其它的配置文件，可以在同一主机上多个Redis实例之间使用同一份配置文件，而同时各个实例又拥有自己的特定配置文件</li></ol> <p><strong>include /path/to/local.conf</strong></p> <h2 id="redis-数据类型"><a href="#redis-数据类型" class="header-anchor">#</a> Redis 数据类型</h2> <p>Redis支持五种数据类型：string（字符串），hash（哈希），list（列表），set（集合）及zset(sorted set：有序集合)。</p> <hr> <h3 id="string（字符串）"><a href="#string（字符串）" class="header-anchor">#</a> String（字符串）</h3> <p>string是redis最基本的类型，你可以理解成与Memcached一模一样的类型，一个key对应一个value。</p> <p>string类型是二进制安全的。意思是redis的string可以包含任何数据。比如jpg图片或者序列化的对象 。</p> <p>string类型是Redis最基本的数据类型，一个键最大能存储512MB。</p> <h4 id="实例-4"><a href="#实例-4" class="header-anchor">#</a> 实例</h4> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; SET name &quot;redis.net.cn&quot;
OK
redis 127.0.0.1:6379&gt; GET name
&quot;redis.net.cn&quot;
</code></pre></div><p>在以上实例中我们使用了 Redis 的 <strong>SET</strong> 和 <strong>GET</strong> 命令。键为 name，对应的值为redis.net.cn。</p> <p>**注意：**一个键最大能存储512MB。</p> <hr> <h3 id="hash（哈希）"><a href="#hash（哈希）" class="header-anchor">#</a> Hash（哈希）</h3> <p>Redis hash 是一个键值对集合。</p> <p>Redis hash是一个string类型的field和value的映射表，hash特别适合用于存储对象。</p> <h4 id="实例-5"><a href="#实例-5" class="header-anchor">#</a> 实例</h4> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; HMSET user:1 username redis.net.cn password redis.net.cn points 200
OK
redis 127.0.0.1:6379&gt; HGETALL user:1
1) &quot;username&quot;
2) &quot;redis.net.cn&quot;
3) &quot;password&quot;
4) &quot;redis.net.cn&quot;
5) &quot;points&quot;
6) &quot;200&quot;
redis 127.0.0.1:6379&gt;
</code></pre></div><p>以上实例中 hash 数据类型存储了包含用户脚本信息的用户对象。 实例中我们使用了 Redis <strong>HMSET, HEGTALL</strong> 命令，<strong>user:1</strong> 为键值。</p> <p>每个 hash 可以存储 232 - 1 键值对（40多亿）。</p> <hr> <h3 id="list（列表）"><a href="#list（列表）" class="header-anchor">#</a> List（列表）</h3> <p>Redis 列表是简单的字符串列表，按照插入顺序排序。你可以添加一个元素导列表的头部（左边）或者尾部（右边）。</p> <h4 id="实例-6"><a href="#实例-6" class="header-anchor">#</a> 实例</h4> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; lpush redis.net.cn redis
(integer) 1
redis 127.0.0.1:6379&gt; lpush redis.net.cn mongodb
(integer) 2
redis 127.0.0.1:6379&gt; lpush redis.net.cn rabitmq
(integer) 3
redis 127.0.0.1:6379&gt; lrange redis.net.cn 0 10
1) &quot;rabitmq&quot;
2) &quot;mongodb&quot;
3) &quot;redis&quot;
redis 127.0.0.1:6379&gt;
</code></pre></div><p>列表最多可存储 232 - 1 元素 (4294967295, 每个列表可存储40多亿)。</p> <hr> <h3 id="set（集合）"><a href="#set（集合）" class="header-anchor">#</a> Set（集合）</h3> <p>Redis的Set是string类型的无序集合。</p> <p>集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是O(1)。</p> <h4 id="sadd-命令"><a href="#sadd-命令" class="header-anchor">#</a> sadd 命令</h4> <p>添加一个string元素到,key对应的set集合中，成功返回1,如果元素以及在集合中返回0,key对应的set不存在返回错误。</p> <div class="language- extra-class"><pre class="language-text"><code>sadd key member
</code></pre></div><h4 id="实例-7"><a href="#实例-7" class="header-anchor">#</a> 实例</h4> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; sadd redis.net.cn redis
(integer) 1
redis 127.0.0.1:6379&gt; sadd redis.net.cn mongodb
(integer) 1
redis 127.0.0.1:6379&gt; sadd redis.net.cn rabitmq
(integer) 1
redis 127.0.0.1:6379&gt; sadd redis.net.cn rabitmq
(integer) 0
redis 127.0.0.1:6379&gt; smembers redis.net.cn
 
1) &quot;rabitmq&quot;
2) &quot;mongodb&quot;
3) &quot;redis&quot;
</code></pre></div><p>**注意：**以上实例中 rabitmq 添加了两次，但根据集合内元素的唯一性，第二次插入的元素将被忽略。</p> <p>集合中最大的成员数为 232 - 1 (4294967295, 每个集合可存储40多亿个成员)。</p> <hr> <h3 id="zset-sorted-set：有序集合"><a href="#zset-sorted-set：有序集合" class="header-anchor">#</a> zset(sorted set：有序集合)</h3> <p>Redis zset 和 set 一样也是string类型元素的集合,且不允许重复的成员。</p> <p>不同的是每个元素都会关联一个double类型的分数。redis正是通过分数来为集合中的成员进行从小到大的排序。</p> <p>zset的成员是唯一的,但分数(score)却可以重复。</p> <h4 id="zadd-命令"><a href="#zadd-命令" class="header-anchor">#</a> zadd 命令</h4> <p>添加元素到集合，元素在集合中存在则更新对应score</p> <div class="language- extra-class"><pre class="language-text"><code>zadd key score member 
</code></pre></div><h4 id="实例-8"><a href="#实例-8" class="header-anchor">#</a> 实例</h4> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; zadd redis.net.cn 0 redis
(integer) 1
redis 127.0.0.1:6379&gt; zadd redis.net.cn 0 mongodb
(integer) 1
redis 127.0.0.1:6379&gt; zadd redis.net.cn 0 rabitmq
(integer) 1
redis 127.0.0.1:6379&gt; zadd redis.net.cn 0 rabitmq
(integer) 0
redis 127.0.0.1:6379&gt; ZRANGEBYSCORE redis.net.cn 0 1000
 
1) &quot;redis&quot;
2) &quot;mongodb&quot;
3) &quot;rabitmq&quot;
</code></pre></div><h2 id="redis-命令"><a href="#redis-命令" class="header-anchor">#</a> Redis 命令</h2> <p>Redis 命令用于在 redis 服务上执行操作。</p> <p>要在 redis 服务上执行命令需要一个 redis 客户端。Redis 客户端在我们之前下载的的 redis 的安装包中。</p> <h4 id="语法-3"><a href="#语法-3" class="header-anchor">#</a> 语法</h4> <p>Redis 客户端的基本语法为：</p> <div class="language- extra-class"><pre class="language-text"><code>$ redis-cli
</code></pre></div><h4 id="实例-9"><a href="#实例-9" class="header-anchor">#</a> 实例</h4> <p>以下实例讲解了如何启动 redis 客户端：</p> <p>启动 redis 客户端，打开终端并输入命令 <strong>redis-cli</strong>。该命令会连接本地的 redis 服务。</p> <div class="language- extra-class"><pre class="language-text"><code>$redis-cliredis 127.0.0.1:6379&gt;redis 127.0.0.1:6379&gt; PING PONG
</code></pre></div><p>在以上实例中我们连接到本地的 redis 服务并执行 <strong>PING</strong> 命令，该命令用于检测 redis 服务是否启动。</p> <hr> <h3 id="在远程服务上执行命令"><a href="#在远程服务上执行命令" class="header-anchor">#</a> 在远程服务上执行命令</h3> <p>如果需要在远程 redis 服务上执行命令，同样我们使用的也是 <strong>redis-cli</strong> 命令。</p> <h4 id="语法-4"><a href="#语法-4" class="header-anchor">#</a> 语法</h4> <div class="language- extra-class"><pre class="language-text"><code>$ redis-cli -h host -p port -a password
</code></pre></div><h4 id="实例-10"><a href="#实例-10" class="header-anchor">#</a> 实例</h4> <p>以下实例演示了如何连接到主机为 127.0.0.1，端口为 6379 ，密码为 mypass 的 redis 服务上。</p> <div class="language- extra-class"><pre class="language-text"><code>$redis-cli -h 127.0.0.1 -p 6379 -a &quot;mypass&quot;
redis 127.0.0.1:6379&gt;
redis 127.0.0.1:6379&gt; PING 
PONG
</code></pre></div><h2 id="redis-键-key"><a href="#redis-键-key" class="header-anchor">#</a> Redis 键(key)</h2> <p>Redis 键命令用于管理 redis 的键。</p> <h4 id="语法-5"><a href="#语法-5" class="header-anchor">#</a> 语法</h4> <p>Redis 键命令的基本语法如下：</p> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; COMMAND KEY_NAME
</code></pre></div><h4 id="实例-11"><a href="#实例-11" class="header-anchor">#</a> 实例</h4> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; SET w3ckey redisOKredis 127.0.0.1:6379&gt; DEL w3ckey(integer) 1
</code></pre></div><p>在以上实例中 <strong>DEL</strong> 是一个命令， <strong>w3ckey</strong> 是一个键。 如果键被删除成功，命令执行后输出 <strong>(integer) 1</strong>，否则将输出 <strong>(integer) 0</strong></p> <hr> <h3 id="redis-keys-命令"><a href="#redis-keys-命令" class="header-anchor">#</a> Redis keys 命令</h3> <p>下表给出了与 Redis 键相关的基本命令：</p> <table><thead><tr><th style="text-align:left;">序号</th> <th style="text-align:left;">命令及描述</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3528.html" target="_blank" rel="noopener noreferrer">DEL key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 该命令用于在 key 存在是删除 key。</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3529.html" target="_blank" rel="noopener noreferrer">DUMP key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 序列化给定 key ，并返回被序列化的值。</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3530.html" target="_blank" rel="noopener noreferrer">EXISTS key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 检查给定 key 是否存在。</td></tr> <tr><td style="text-align:left;">4</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3531.html" target="_blank" rel="noopener noreferrer">EXPIRE key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> seconds 为给定 key 设置过期时间。</td></tr> <tr><td style="text-align:left;">5</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3532.html" target="_blank" rel="noopener noreferrer">EXPIREAT key timestamp<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> EXPIREAT 的作用和 EXPIRE 类似，都用于为 key 设置过期时间。 不同在于 EXPIREAT 命令接受的时间参数是 UNIX 时间戳(unix timestamp)。</td></tr> <tr><td style="text-align:left;">6</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3533.html" target="_blank" rel="noopener noreferrer">PEXPIRE key milliseconds<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 设置 key 的过期时间亿以毫秒计。</td></tr> <tr><td style="text-align:left;">7</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3534.html" target="_blank" rel="noopener noreferrer">PEXPIREAT key milliseconds-timestamp<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 设置 key 过期时间的时间戳(unix timestamp) 以毫秒计</td></tr> <tr><td style="text-align:left;">8</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3535.html" target="_blank" rel="noopener noreferrer">KEYS pattern<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 查找所有符合给定模式( pattern)的 key 。</td></tr> <tr><td style="text-align:left;">9</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3536.html" target="_blank" rel="noopener noreferrer">MOVE key db<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 将当前数据库的 key 移动到给定的数据库 db 当中。</td></tr> <tr><td style="text-align:left;">10</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3537.html" target="_blank" rel="noopener noreferrer">PERSIST key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 移除 key 的过期时间，key 将持久保持。</td></tr> <tr><td style="text-align:left;">11</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3538.html" target="_blank" rel="noopener noreferrer">PTTL key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 以毫秒为单位返回 key 的剩余的过期时间。</td></tr> <tr><td style="text-align:left;">12</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3539.html" target="_blank" rel="noopener noreferrer">TTL key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 以秒为单位，返回给定 key 的剩余生存时间(TTL, time to live)。</td></tr> <tr><td style="text-align:left;">13</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3540.html" target="_blank" rel="noopener noreferrer">RANDOMKEY<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 从当前数据库中随机返回一个 key 。</td></tr> <tr><td style="text-align:left;">14</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3541.html" target="_blank" rel="noopener noreferrer">RENAME key newkey<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 修改 key 的名称</td></tr> <tr><td style="text-align:left;">15</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3542.html" target="_blank" rel="noopener noreferrer">RENAMENX key newkey<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 仅当 newkey 不存在时，将 key 改名为 newkey 。</td></tr> <tr><td style="text-align:left;">16</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3543.html" target="_blank" rel="noopener noreferrer">TYPE key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回 key 所储存的值的类型。</td></tr></tbody></table> <h3 id="redis的所有命令"><a href="#redis的所有命令" class="header-anchor">#</a> <a href="Redis%E5%91%BD%E4%BB%A4">Redis的所有命令</a></h3> <h2 id="redis-字符串-string"><a href="#redis-字符串-string" class="header-anchor">#</a> Redis 字符串(String)</h2> <p>Redis 字符串数据类型的相关命令用于管理 redis 字符串值，基本语法如下：</p> <h4 id="语法-6"><a href="#语法-6" class="header-anchor">#</a> 语法</h4> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; COMMAND KEY_NAME
</code></pre></div><h4 id="实例-12"><a href="#实例-12" class="header-anchor">#</a> 实例</h4> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; SET w3ckey redis OK redis 127.0.0.1:6379&gt; GET w3ckey &quot;redis&quot;
</code></pre></div><p>在以上实例中我们使用了 <strong>SET</strong> 和 <strong>GET</strong> 命令，键为 w3ckey。</p> <hr> <h3 id="redis-字符串命令"><a href="#redis-字符串命令" class="header-anchor">#</a> Redis 字符串命令</h3> <p>下表列出了常用的 redis 字符串命令：</p> <table><thead><tr><th style="text-align:left;">序号</th> <th style="text-align:left;">命令及描述</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3544.html" target="_blank" rel="noopener noreferrer">SET key value<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 设置指定 key 的值</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3545.html" target="_blank" rel="noopener noreferrer">GET key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取指定 key 的值。</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3546.html" target="_blank" rel="noopener noreferrer">GETRANGE key start end<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回 key 中字符串值的子字符</td></tr> <tr><td style="text-align:left;">4</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3547.html" target="_blank" rel="noopener noreferrer">GETSET key value<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 将给定 key 的值设为 value ，并返回 key 的旧值(old value)。</td></tr> <tr><td style="text-align:left;">5</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3548.html" target="_blank" rel="noopener noreferrer">GETBIT key offset<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 对 key 所储存的字符串值，获取指定偏移量上的位(bit)。</td></tr> <tr><td style="text-align:left;">6</td> <td style="text-align:left;">[MGET key1 <a href="https://www.redis.net.cn/order/3549.html" target="_blank" rel="noopener noreferrer">key2..]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取所有(一个或多个)给定 key 的值。</td></tr> <tr><td style="text-align:left;">7</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3550.html" target="_blank" rel="noopener noreferrer">SETBIT key offset value<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 对 key 所储存的字符串值，设置或清除指定偏移量上的位(bit)。</td></tr> <tr><td style="text-align:left;">8</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3551.html" target="_blank" rel="noopener noreferrer">SETEX key seconds value<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 将值 value 关联到 key ，并将 key 的过期时间设为 seconds (以秒为单位)。</td></tr> <tr><td style="text-align:left;">9</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3552.html" target="_blank" rel="noopener noreferrer">SETNX key value<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 只有在 key 不存在时设置 key 的值。</td></tr> <tr><td style="text-align:left;">10</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3553.html" target="_blank" rel="noopener noreferrer">SETRANGE key offset value<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 用 value 参数覆写给定 key 所储存的字符串值，从偏移量 offset 开始。</td></tr> <tr><td style="text-align:left;">11</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3554.html" target="_blank" rel="noopener noreferrer">STRLEN key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回 key 所储存的字符串值的长度。</td></tr> <tr><td style="text-align:left;">12</td> <td style="text-align:left;">[MSET key value <a href="https://www.redis.net.cn/order/3555.html" target="_blank" rel="noopener noreferrer">key value ...]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 同时设置一个或多个 key-value 对。</td></tr> <tr><td style="text-align:left;">13</td> <td style="text-align:left;">[MSETNX key value <a href="https://www.redis.net.cn/order/3556.html" target="_blank" rel="noopener noreferrer">key value ...]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 同时设置一个或多个 key-value 对，当且仅当所有给定 key 都不存在。</td></tr> <tr><td style="text-align:left;">14</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3557.html" target="_blank" rel="noopener noreferrer">PSETEX key milliseconds value<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 这个命令和 SETEX 命令相似，但它以毫秒为单位设置 key 的生存时间，而不是像 SETEX 命令那样，以秒为单位。</td></tr> <tr><td style="text-align:left;">15</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3558.html" target="_blank" rel="noopener noreferrer">INCR key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 将 key 中储存的数字值增一。</td></tr> <tr><td style="text-align:left;">16</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3559.html" target="_blank" rel="noopener noreferrer">INCRBY key increment<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 将 key 所储存的值加上给定的增量值（increment） 。</td></tr> <tr><td style="text-align:left;">17</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3560.html" target="_blank" rel="noopener noreferrer">INCRBYFLOAT key increment<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 将 key 所储存的值加上给定的浮点增量值（increment） 。</td></tr> <tr><td style="text-align:left;">18</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3561.html" target="_blank" rel="noopener noreferrer">DECR key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 将 key 中储存的数字值减一。</td></tr> <tr><td style="text-align:left;">19</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3562.html" target="_blank" rel="noopener noreferrer">DECRBY key decrement<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> key 所储存的值减去给定的减量值（decrement） 。</td></tr> <tr><td style="text-align:left;">20</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3563.html" target="_blank" rel="noopener noreferrer">APPEND key value<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 如果 key 已经存在并且是一个字符串， APPEND 命令将 value 追加到 key 原来的值的末尾。</td></tr></tbody></table> <h2 id="redis-哈希-hash"><a href="#redis-哈希-hash" class="header-anchor">#</a> Redis 哈希(Hash)</h2> <p>Redis hash 是一个string类型的field和value的映射表，hash特别适合用于存储对象。</p> <p>Redis 中每个 hash 可以存储 232 - 1 键值对（40多亿）。</p> <h4 id="实例-13"><a href="#实例-13" class="header-anchor">#</a> 实例</h4> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; HMSET w3ckey name &quot;redis tutorial&quot; description &quot;redis basic commands for caching&quot; likes 20 visitors 23000OKredis 127.0.0.1:6379&gt; HGETALL w3ckey 1) &quot;name&quot;2) &quot;redis tutorial&quot;3) &quot;description&quot;4) &quot;redis basic commands for caching&quot;5) &quot;likes&quot;6) &quot;20&quot;7) &quot;visitors&quot;8) &quot;23000&quot;
</code></pre></div><p>在以上实例中，我们设置了 redis 的一些描述信息(name, description, likes, visitors) 到哈希表的 w3ckey 中。</p> <hr> <h3 id="redis-hash-命令"><a href="#redis-hash-命令" class="header-anchor">#</a> Redis hash 命令</h3> <p>下表列出了 redis hash 基本的相关命令：</p> <table><thead><tr><th style="text-align:left;">序号</th> <th style="text-align:left;">命令及描述</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;">[HDEL key field2 <a href="https://www.redis.net.cn/order/3564.html" target="_blank" rel="noopener noreferrer">field2]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 删除一个或多个哈希表字段</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3565.html" target="_blank" rel="noopener noreferrer">HEXISTS key field<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 查看哈希表 key 中，指定的字段是否存在。</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3566.html" target="_blank" rel="noopener noreferrer">HGET key field<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取存储在哈希表中指定字段的值/td&gt;</td></tr> <tr><td style="text-align:left;">4</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3567.html" target="_blank" rel="noopener noreferrer">HGETALL key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取在哈希表中指定 key 的所有字段和值</td></tr> <tr><td style="text-align:left;">5</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3568.html" target="_blank" rel="noopener noreferrer">HINCRBY key field increment<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 为哈希表 key 中的指定字段的整数值加上增量 increment 。</td></tr> <tr><td style="text-align:left;">6</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3569.html" target="_blank" rel="noopener noreferrer">HINCRBYFLOAT key field increment<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 为哈希表 key 中的指定字段的浮点数值加上增量 increment 。</td></tr> <tr><td style="text-align:left;">7</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3570.html" target="_blank" rel="noopener noreferrer">HKEYS key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取所有哈希表中的字段</td></tr> <tr><td style="text-align:left;">8</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3571.html" target="_blank" rel="noopener noreferrer">HLEN key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取哈希表中字段的数量</td></tr> <tr><td style="text-align:left;">9</td> <td style="text-align:left;">[HMGET key field1 <a href="https://www.redis.net.cn/order/3572.html" target="_blank" rel="noopener noreferrer">field2]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取所有给定字段的值</td></tr> <tr><td style="text-align:left;">10</td> <td style="text-align:left;">[HMSET key field1 value1 <a href="https://www.redis.net.cn/order/3573.html" target="_blank" rel="noopener noreferrer">field2 value2 ]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 同时将多个 field-value (域-值)对设置到哈希表 key 中。</td></tr> <tr><td style="text-align:left;">11</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3574.html" target="_blank" rel="noopener noreferrer">HSET key field value<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 将哈希表 key 中的字段 field 的值设为 value 。</td></tr> <tr><td style="text-align:left;">12</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3575.html" target="_blank" rel="noopener noreferrer">HSETNX key field value<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 只有在字段 field 不存在时，设置哈希表字段的值。</td></tr> <tr><td style="text-align:left;">13</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3576.html" target="_blank" rel="noopener noreferrer">HVALS key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取哈希表中所有值</td></tr> <tr><td style="text-align:left;">14</td> <td style="text-align:left;">HSCAN key cursor [MATCH pattern] [COUNT count] 迭代哈希表中的键值对。</td></tr></tbody></table> <h2 id="redis-列表-list"><a href="#redis-列表-list" class="header-anchor">#</a> Redis 列表(List)</h2> <p>Redis列表是简单的字符串列表，按照插入顺序排序。你可以添加一个元素导列表的头部（左边）或者尾部（右边）</p> <p>一个列表最多可以包含 232 - 1 个元素 (4294967295, 每个列表超过40亿个元素)。</p> <h4 id="实例-14"><a href="#实例-14" class="header-anchor">#</a> 实例</h4> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; LPUSH w3ckey redis
(integer) 1redis 127.0.0.1:6379&gt; LPUSH w3ckey mongodb
(integer) 2redis 127.0.0.1:6379&gt; LPUSH w3ckey mysql
(integer) 3redis 127.0.0.1:6379&gt; LRANGE w3ckey 0 10
1) &quot;mysql&quot;
2) &quot;mongodb&quot;
3) &quot;redis&quot;
</code></pre></div><p>在以上实例中我们使用了 <strong>LPUSH</strong> 将三个值插入了名为 w3ckey 的列表当中。</p> <h3 id="redis-列表命令"><a href="#redis-列表命令" class="header-anchor">#</a> Redis 列表命令</h3> <p>下表列出了列表相关的基本命令：</p> <table><thead><tr><th style="text-align:left;">序号</th> <th style="text-align:left;">命令及描述</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;">[BLPOP key1 <a href="https://www.redis.net.cn/order/3577.html" target="_blank" rel="noopener noreferrer">key2 ] timeout<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 移出并获取列表的第一个元素， 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;">[BRPOP key1 <a href="https://www.redis.net.cn/order/3578.html" target="_blank" rel="noopener noreferrer">key2 ] timeout<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 移出并获取列表的最后一个元素， 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3579.html" target="_blank" rel="noopener noreferrer">BRPOPLPUSH source destination timeout<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 从列表中弹出一个值，将弹出的元素插入到另外一个列表中并返回它； 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。</td></tr> <tr><td style="text-align:left;">4</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3580.html" target="_blank" rel="noopener noreferrer">LINDEX key index<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 通过索引获取列表中的元素</td></tr> <tr><td style="text-align:left;">5</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3581.html" target="_blank" rel="noopener noreferrer">LINSERT key BEFORE|AFTER pivot value<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 在列表的元素前或者后插入元素</td></tr> <tr><td style="text-align:left;">6</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3582.html" target="_blank" rel="noopener noreferrer">LLEN key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取列表长度</td></tr> <tr><td style="text-align:left;">7</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3583.html" target="_blank" rel="noopener noreferrer">LPOP key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 移出并获取列表的第一个元素</td></tr> <tr><td style="text-align:left;">8</td> <td style="text-align:left;">[LPUSH key value1 <a href="https://www.redis.net.cn/order/3584.html" target="_blank" rel="noopener noreferrer">value2]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 将一个或多个值插入到列表头部</td></tr> <tr><td style="text-align:left;">9</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3585.html" target="_blank" rel="noopener noreferrer">LPUSHX key value<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 将一个或多个值插入到已存在的列表头部</td></tr> <tr><td style="text-align:left;">10</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3586.html" target="_blank" rel="noopener noreferrer">LRANGE key start stop<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取列表指定范围内的元素</td></tr> <tr><td style="text-align:left;">11</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3587.html" target="_blank" rel="noopener noreferrer">LREM key count value<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 移除列表元素</td></tr> <tr><td style="text-align:left;">12</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3588.html" target="_blank" rel="noopener noreferrer">LSET key index value<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 通过索引设置列表元素的值</td></tr> <tr><td style="text-align:left;">13</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3589.html" target="_blank" rel="noopener noreferrer">LTRIM key start stop<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 对一个列表进行修剪(trim)，就是说，让列表只保留指定区间内的元素，不在指定区间之内的元素都将被删除。</td></tr> <tr><td style="text-align:left;">14</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3590.html" target="_blank" rel="noopener noreferrer">RPOP key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 移除并获取列表最后一个元素</td></tr> <tr><td style="text-align:left;">15</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3591.html" target="_blank" rel="noopener noreferrer">RPOPLPUSH source destination<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 移除列表的最后一个元素，并将该元素添加到另一个列表并返回</td></tr> <tr><td style="text-align:left;">16</td> <td style="text-align:left;">[RPUSH key value1 <a href="https://www.redis.net.cn/order/3592.html" target="_blank" rel="noopener noreferrer">value2]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 在列表中添加一个或多个值</td></tr> <tr><td style="text-align:left;">17</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3593.html" target="_blank" rel="noopener noreferrer">RPUSHX key value<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 为已存在的列表添加值</td></tr></tbody></table> <h2 id="redis-集合-set"><a href="#redis-集合-set" class="header-anchor">#</a> Redis 集合(Set)</h2> <p>Redis的Set是string类型的无序集合。集合成员是唯一的，这就意味着集合中不能出现重复的数据。</p> <p>Redis 中 集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是O(1)。</p> <p>集合中最大的成员数为 232 - 1 (4294967295, 每个集合可存储40多亿个成员)。</p> <h4 id="实例-15"><a href="#实例-15" class="header-anchor">#</a> 实例</h4> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; SADD w3ckey redis
(integer) 1
redis 127.0.0.1:6379&gt; SADD w3ckey mongodb
(integer) 1
redis 127.0.0.1:6379&gt; SADD w3ckey mysql
(integer) 1
redis 127.0.0.1:6379&gt; SADD w3ckey mysql
(integer) 0
redis 127.0.0.1:6379&gt; SMEMBERS w3ckey 
1) &quot;mysql&quot;
2) &quot;mongodb&quot;
3) &quot;redis&quot;
</code></pre></div><p>在以上实例中我们通过 <strong>SADD</strong> 命令向名为 w3ckey 的集合插入的三个元素。</p> <hr> <h3 id="redis-集合命令"><a href="#redis-集合命令" class="header-anchor">#</a> Redis 集合命令</h3> <p>下表列出了 Redis 集合基本命令：</p> <table><thead><tr><th style="text-align:left;">序号</th> <th style="text-align:left;">命令及描述</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;">[SADD key member1 <a href="https://www.redis.net.cn/order/3594.html" target="_blank" rel="noopener noreferrer">member2]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 向集合添加一个或多个成员</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3595.html" target="_blank" rel="noopener noreferrer">SCARD key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取集合的成员数</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;">[SDIFF key1 <a href="https://www.redis.net.cn/order/3596.html" target="_blank" rel="noopener noreferrer">key2]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回给定所有集合的差集</td></tr> <tr><td style="text-align:left;">4</td> <td style="text-align:left;">[SDIFFSTORE destination key1 <a href="https://www.redis.net.cn/order/3597.html" target="_blank" rel="noopener noreferrer">key2]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回给定所有集合的差集并存储在 destination 中</td></tr> <tr><td style="text-align:left;">5</td> <td style="text-align:left;">[SINTER key1 <a href="https://www.redis.net.cn/order/3598.html" target="_blank" rel="noopener noreferrer">key2]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回给定所有集合的交集</td></tr> <tr><td style="text-align:left;">6</td> <td style="text-align:left;">[SINTERSTORE destination key1 <a href="https://www.redis.net.cn/order/3599.html" target="_blank" rel="noopener noreferrer">key2]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回给定所有集合的交集并存储在 destination 中</td></tr> <tr><td style="text-align:left;">7</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3600.html" target="_blank" rel="noopener noreferrer">SISMEMBER key member<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 判断 member 元素是否是集合 key 的成员</td></tr> <tr><td style="text-align:left;">8</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3601.html" target="_blank" rel="noopener noreferrer">SMEMBERS key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回集合中的所有成员</td></tr> <tr><td style="text-align:left;">9</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3602.html" target="_blank" rel="noopener noreferrer">SMOVE source destination member<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 将 member 元素从 source 集合移动到 destination 集合</td></tr> <tr><td style="text-align:left;">10</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3603.html" target="_blank" rel="noopener noreferrer">SPOP key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 移除并返回集合中的一个随机元素</td></tr> <tr><td style="text-align:left;">11</td> <td style="text-align:left;">[SRANDMEMBER key <a href="https://www.redis.net.cn/order/3604.html" target="_blank" rel="noopener noreferrer">count]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回集合中一个或多个随机数</td></tr> <tr><td style="text-align:left;">12</td> <td style="text-align:left;">[SREM key member1 <a href="https://www.redis.net.cn/order/3605.html" target="_blank" rel="noopener noreferrer">member2]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 移除集合中一个或多个成员</td></tr> <tr><td style="text-align:left;">13</td> <td style="text-align:left;">[SUNION key1 <a href="https://www.redis.net.cn/order/3606.html" target="_blank" rel="noopener noreferrer">key2]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回所有给定集合的并集</td></tr> <tr><td style="text-align:left;">14</td> <td style="text-align:left;">[SUNIONSTORE destination key1 <a href="https://www.redis.net.cn/order/3607.html" target="_blank" rel="noopener noreferrer">key2]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 所有给定集合的并集存储在 destination 集合中</td></tr> <tr><td style="text-align:left;">15</td> <td style="text-align:left;">[SSCAN key cursor <a href="https://www.redis.net.cn/order/3608.html" target="_blank" rel="noopener noreferrer">MATCH pattern] [COUNT count]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 迭代集合中的元素</td></tr></tbody></table> <h2 id="redis-有序集合-sorted-set"><a href="#redis-有序集合-sorted-set" class="header-anchor">#</a> Redis 有序集合(sorted set)</h2> <p>Redis 有序集合和集合一样也是string类型元素的集合,且不允许重复的成员。</p> <p>不同的是每个元素都会关联一个double类型的分数。redis正是通过分数来为集合中的成员进行从小到大的排序。</p> <p>有序集合的成员是唯一的,但分数(score)却可以重复。</p> <p>集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是O(1)。 集合中最大的成员数为 232 - 1 (4294967295, 每个集合可存储40多亿个成员)。</p> <h4 id="实例-16"><a href="#实例-16" class="header-anchor">#</a> 实例</h4> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; ZADD w3ckey 1 redis
(integer) 1
redis 127.0.0.1:6379&gt; ZADD w3ckey 2 mongodb
(integer) 1
redis 127.0.0.1:6379&gt; ZADD w3ckey 3 mysql
(integer) 1
redis 127.0.0.1:6379&gt; ZADD w3ckey 3 mysql
(integer) 0
redis 127.0.0.1:6379&gt; ZADD w3ckey 4 mysql
(integer) 0
redis 127.0.0.1:6379&gt; ZRANGE w3ckey 0 10 WITHSCORES 
1) &quot;redis&quot;
2) &quot;1&quot;
3) &quot;mongodb&quot;
4) &quot;2&quot;
5) &quot;mysql&quot;
6) &quot;4&quot;
</code></pre></div><p>在以上实例中我们通过命令 <strong>ZADD</strong> 向 redis 的有序集合中添加了三个值并关联上分数。</p> <hr> <h3 id="redis-有序集合命令"><a href="#redis-有序集合命令" class="header-anchor">#</a> Redis 有序集合命令</h3> <p>下表列出了 redis 有序集合的基本命令:</p> <table><thead><tr><th style="text-align:left;">序号</th> <th style="text-align:left;">命令及描述</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;">[ZADD key score1 member1 <a href="https://www.redis.net.cn/order/3609.html" target="_blank" rel="noopener noreferrer">score2 member2]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 向有序集合添加一个或多个成员，或者更新已存在成员的分数</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3610.html" target="_blank" rel="noopener noreferrer">ZCARD key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取有序集合的成员数</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3611.html" target="_blank" rel="noopener noreferrer">ZCOUNT key min max<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 计算在有序集合中指定区间分数的成员数</td></tr> <tr><td style="text-align:left;">4</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3612.html" target="_blank" rel="noopener noreferrer">ZINCRBY key increment member<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 有序集合中对指定成员的分数加上增量 increment</td></tr> <tr><td style="text-align:left;">5</td> <td style="text-align:left;">[ZINTERSTORE destination numkeys key <a href="https://www.redis.net.cn/order/3613.html" target="_blank" rel="noopener noreferrer">key ...]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 计算给定的一个或多个有序集的交集并将结果集存储在新的有序集合 key 中</td></tr> <tr><td style="text-align:left;">6</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3614.html" target="_blank" rel="noopener noreferrer">ZLEXCOUNT key min max<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 在有序集合中计算指定字典区间内成员数量</td></tr> <tr><td style="text-align:left;">7</td> <td style="text-align:left;">[ZRANGE key start stop <a href="https://www.redis.net.cn/order/3615.html" target="_blank" rel="noopener noreferrer">WITHSCORES]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 通过索引区间返回有序集合成指定区间内的成员</td></tr> <tr><td style="text-align:left;">8</td> <td style="text-align:left;">[ZRANGEBYLEX key min max <a href="https://www.redis.net.cn/order/3616.html" target="_blank" rel="noopener noreferrer">LIMIT offset count]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 通过字典区间返回有序集合的成员</td></tr> <tr><td style="text-align:left;">9</td> <td style="text-align:left;">[ZRANGEBYSCORE key min max <a href="https://www.redis.net.cn/order/3617.html" target="_blank" rel="noopener noreferrer">WITHSCORES] [LIMIT]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 通过分数返回有序集合指定区间内的成员</td></tr> <tr><td style="text-align:left;">10</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3618.html" target="_blank" rel="noopener noreferrer">ZRANK key member<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回有序集合中指定成员的索引</td></tr> <tr><td style="text-align:left;">11</td> <td style="text-align:left;">[ZREM key member <a href="https://www.redis.net.cn/order/3619.html" target="_blank" rel="noopener noreferrer">member ...]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 移除有序集合中的一个或多个成员</td></tr> <tr><td style="text-align:left;">12</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3620.html" target="_blank" rel="noopener noreferrer">ZREMRANGEBYLEX key min max<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 移除有序集合中给定的字典区间的所有成员</td></tr> <tr><td style="text-align:left;">13</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3621.html" target="_blank" rel="noopener noreferrer">ZREMRANGEBYRANK key start stop<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 移除有序集合中给定的排名区间的所有成员</td></tr> <tr><td style="text-align:left;">14</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3622.html" target="_blank" rel="noopener noreferrer">ZREMRANGEBYSCORE key min max<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 移除有序集合中给定的分数区间的所有成员</td></tr> <tr><td style="text-align:left;">15</td> <td style="text-align:left;">[ZREVRANGE key start stop <a href="https://www.redis.net.cn/order/3623.html" target="_blank" rel="noopener noreferrer">WITHSCORES]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回有序集中指定区间内的成员，通过索引，分数从高到底</td></tr> <tr><td style="text-align:left;">16</td> <td style="text-align:left;">[ZREVRANGEBYSCORE key max min <a href="https://www.redis.net.cn/order/3624.html" target="_blank" rel="noopener noreferrer">WITHSCORES]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回有序集中指定分数区间内的成员，分数从高到低排序</td></tr> <tr><td style="text-align:left;">17</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3625.html" target="_blank" rel="noopener noreferrer">ZREVRANK key member<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回有序集合中指定成员的排名，有序集成员按分数值递减(从大到小)排序</td></tr> <tr><td style="text-align:left;">18</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3626.html" target="_blank" rel="noopener noreferrer">ZSCORE key member<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回有序集中，成员的分数值</td></tr> <tr><td style="text-align:left;">19</td> <td style="text-align:left;">[ZUNIONSTORE destination numkeys key <a href="https://www.redis.net.cn/order/3627.html" target="_blank" rel="noopener noreferrer">key ...]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 计算给定的一个或多个有序集的并集，并存储在新的 key 中</td></tr> <tr><td style="text-align:left;">20</td> <td style="text-align:left;">[ZSCAN key cursor <a href="https://www.redis.net.cn/order/3628.html" target="_blank" rel="noopener noreferrer">MATCH pattern] [COUNT count]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 迭代有序集合中的元素（包括元素成员和元素分值）</td></tr></tbody></table> <h2 id="redis-hyperloglog"><a href="#redis-hyperloglog" class="header-anchor">#</a> Redis HyperLogLog</h2> <p>Redis 在 2.8.9 版本添加了 HyperLogLog 结构。</p> <p>Redis HyperLogLog 是用来做基数统计的算法，HyperLogLog 的优点是，在输入元素的数量或者体积非常非常大时，计算基数所需的空间总是固定 的、并且是很小的。</p> <p>在 Redis 里面，每个 HyperLogLog 键只需要花费 12 KB 内存，就可以计算接近 2^64 个不同元素的基 数。这和计算基数时，元素越多耗费内存就越多的集合形成鲜明对比。</p> <p>但是，因为 HyperLogLog 只会根据输入元素来计算基数，而不会储存输入元素本身，所以 HyperLogLog 不能像集合那样，返回输入的各个元素。</p> <hr> <h3 id="什么是基数"><a href="#什么是基数" class="header-anchor">#</a> 什么是基数?</h3> <p>比如数据集 {1, 3, 5, 7, 5, 7, 8}， 那么这个数据集的基数集为 {1, 3, 5 ,7, 8}, 基数(不重复元素)为5。 基数估计就是在误差可接受的范围内，快速计算基数。</p> <hr> <h3 id="实例-17"><a href="#实例-17" class="header-anchor">#</a> 实例</h3> <p>以下实例演示了 HyperLogLog 的工作过程：</p> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; PFADD w3ckey &quot;redis&quot; 
1) 
(integer) 1
redis 127.0.0.1:6379&gt; PFADD w3ckey &quot;mongodb&quot; 
1) 
(integer) 1 
redis 127.0.0.1:6379&gt; PFADD w3ckey &quot;mysql&quot; 
1) 
(integer) 1 
redis 127.0.0.1:6379&gt; PFCOUNT w3ckey 
(integer) 3
</code></pre></div><hr> <h3 id="redis-hyperloglog-命令"><a href="#redis-hyperloglog-命令" class="header-anchor">#</a> Redis HyperLogLog 命令</h3> <p>下表列出了 redis HyperLogLog 的基本命令：</p> <table><thead><tr><th style="text-align:left;">序号</th> <th style="text-align:left;">命令及描述</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;">[PFADD key element <a href="https://www.redis.net.cn/order/3629.html" target="_blank" rel="noopener noreferrer">element ...]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 添加指定元素到 HyperLogLog 中。</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;">[PFCOUNT key <a href="https://www.redis.net.cn/order/3630.html" target="_blank" rel="noopener noreferrer">key ...]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回给定 HyperLogLog 的基数估算值。</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;">[PFMERGE destkey sourcekey <a href="https://www.redis.net.cn/order/3631.html" target="_blank" rel="noopener noreferrer">sourcekey ...]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 将多个 HyperLogLog 合并为一个 HyperLogLog</td></tr></tbody></table> <h2 id="redis-发布订阅"><a href="#redis-发布订阅" class="header-anchor">#</a> Redis 发布订阅</h2> <p>Redis 发布订阅(pub/sub)是一种消息通信模式：发送者(pub)发送消息，订阅者(sub)接收消息。</p> <p>Redis 客户端可以订阅任意数量的频道。</p> <p>下图展示了频道 channel1 ， 以及订阅这个频道的三个客户端 —— client2 、 client5 和 client1 之间的关系：</p> <p><img src="https://www.redis.net.cn/Image/pubsub1.png" alt="pubsub1"></p> <p>当有新消息通过 PUBLISH 命令发送给频道 channel1 时， 这个消息就会被发送给订阅它的三个客户端：</p> <p><img src="https://www.redis.net.cn/Image/pubsub2.png" alt="pubsub2"></p> <hr> <h3 id="实例-18"><a href="#实例-18" class="header-anchor">#</a> 实例</h3> <p>以下实例演示了发布订阅是如何工作的。在我们实例中我们创建了订阅频道名为 <strong>redisChat</strong>:</p> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; SUBSCRIBE redisChat Reading messages... (press Ctrl-C to quit)1) &quot;subscribe&quot;2) &quot;redisChat&quot;3) (integer) 1
</code></pre></div><p>现在，我们先重新开启个 redis 客户端，然后在同一个频道 redisChat 发布两次消息，订阅者就能接收到消息。</p> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; PUBLISH redisChat &quot;Redis is a great caching technique&quot; (integer) 1 redis 127.0.0.1:6379&gt; PUBLISH redisChat &quot;Learn redis by w3cschool.cc&quot; (integer) 1 # 订阅者的客户端会显示如下消息1) &quot;message&quot;2) &quot;redisChat&quot;3) &quot;Redis is a great caching technique&quot;1) &quot;message&quot;2) &quot;redisChat&quot;3) &quot;Learn redis by w3cschool.cc&quot;
</code></pre></div><hr> <h3 id="redis-发布订阅命令"><a href="#redis-发布订阅命令" class="header-anchor">#</a> Redis 发布订阅命令</h3> <p>下表列出了 redis 发布订阅常用命令：</p> <table><thead><tr><th style="text-align:left;">序号</th> <th style="text-align:left;">命令及描述</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;">[PSUBSCRIBE pattern <a href="https://www.redis.net.cn/order/3632.html" target="_blank" rel="noopener noreferrer">pattern ...]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 订阅一个或多个符合给定模式的频道。</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;">[PUBSUB subcommand <a href="https://www.redis.net.cn/order/3633.html" target="_blank" rel="noopener noreferrer">argument [argument ...]]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 查看订阅与发布系统状态。</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3634.html" target="_blank" rel="noopener noreferrer">PUBLISH channel message<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 将信息发送到指定的频道。</td></tr> <tr><td style="text-align:left;">4</td> <td style="text-align:left;">[PUNSUBSCRIBE <a href="https://www.redis.net.cn/order/3635.html" target="_blank" rel="noopener noreferrer">pattern [pattern ...]]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 退订所有给定模式的频道。</td></tr> <tr><td style="text-align:left;">5</td> <td style="text-align:left;">[SUBSCRIBE channel <a href="https://www.redis.net.cn/order/3636.html" target="_blank" rel="noopener noreferrer">channel ...]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 订阅给定的一个或多个频道的信息。</td></tr> <tr><td style="text-align:left;">6</td> <td style="text-align:left;">[UNSUBSCRIBE <a href="https://www.redis.net.cn/order/3637.html" target="_blank" rel="noopener noreferrer">channel [channel ...]]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 指退订给定的频道。</td></tr></tbody></table> <h2 id="redis-事务"><a href="#redis-事务" class="header-anchor">#</a> Redis 事务</h2> <p>Redis 事务可以一次执行多个命令， 并且带有以下两个重要的保证：</p> <ul><li>事务是一个单独的隔离操作：事务中的所有命令都会序列化、按顺序地执行。事务在执行的过程中，不会被其他客户端发送来的命令请求所打断。</li> <li>事务是一个原子操作：事务中的命令要么全部被执行，要么全部都不执行。</li></ul> <p>一个事务从开始到执行会经历以下三个阶段：</p> <ul><li>开始事务。</li> <li>命令入队。</li> <li>执行事务。</li></ul> <hr> <h3 id="实例-19"><a href="#实例-19" class="header-anchor">#</a> 实例</h3> <p>以下是一个事务的例子， 它先以 <strong>MULTI</strong> 开始一个事务， 然后将多个命令入队到事务中， 最后由 <strong>EXEC</strong> 命令触发事务， 一并执行事务中的所有命令：</p> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; MULTIOK redis 127.0.0.1:6379&gt; SET book-name &quot;Mastering C++ in 21 days&quot;QUEUED redis 127.0.0.1:6379&gt; GET book-nameQUEUED redis 127.0.0.1:6379&gt; SADD tag &quot;C++&quot; &quot;Programming&quot; &quot;Mastering Series&quot;QUEUED redis 127.0.0.1:6379&gt; SMEMBERS tagQUEUED redis 127.0.0.1:6379&gt; EXEC1) OK2) &quot;Mastering C++ in 21 days&quot;3) (integer) 34) 1) &quot;Mastering Series&quot;   2) &quot;C++&quot;   3) &quot;Programming&quot;
</code></pre></div><hr> <h3 id="redis-事务命令"><a href="#redis-事务命令" class="header-anchor">#</a> Redis 事务命令</h3> <p>下表列出了 redis 事务的相关命令：</p> <table><thead><tr><th style="text-align:left;">序号</th> <th style="text-align:left;">命令及描述</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3638.html" target="_blank" rel="noopener noreferrer">DISCARD<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 取消事务，放弃执行事务块内的所有命令。</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3639.html" target="_blank" rel="noopener noreferrer">EXEC<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 执行所有事务块内的命令。</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3640.html" target="_blank" rel="noopener noreferrer">MULTI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 标记一个事务块的开始。</td></tr> <tr><td style="text-align:left;">4</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3641.html" target="_blank" rel="noopener noreferrer">UNWATCH<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 取消 WATCH 命令对所有 key 的监视。</td></tr> <tr><td style="text-align:left;">5</td> <td style="text-align:left;">[WATCH key <a href="https://www.redis.net.cn/order/3642.html" target="_blank" rel="noopener noreferrer">key ...]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 监视一个(或多个) key ，如果在事务执行之前这个(或这些) key 被其他命令所改动，那么事务将被打断。</td></tr></tbody></table> <h2 id="redis-脚本"><a href="#redis-脚本" class="header-anchor">#</a> Redis 脚本</h2> <p>Redis 脚本使用 Lua 解释器来执行脚本。 Reids 2.6 版本通过内嵌支持 Lua 环境。执行脚本的常用命令为 <strong>EVAL</strong>。</p> <h4 id="语法-7"><a href="#语法-7" class="header-anchor">#</a> 语法</h4> <p>Eval 命令的基本语法如下：</p> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; EVAL script numkeys key [key ...] arg [arg ...]
</code></pre></div><h4 id="实例-20"><a href="#实例-20" class="header-anchor">#</a> 实例</h4> <p>以下实例演示了 redis 脚本工作过程：</p> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; EVAL &quot;return {KEYS[1],KEYS[2],ARGV[1],ARGV[2]}&quot; 2 key1 key2 first second 1) &quot;key1&quot;2) &quot;key2&quot;3) &quot;first&quot;4) &quot;second&quot;
</code></pre></div><hr> <h3 id="redis-脚本命令"><a href="#redis-脚本命令" class="header-anchor">#</a> Redis 脚本命令</h3> <p>下表列出了 redis 脚本常用命令：</p> <table><thead><tr><th style="text-align:left;">序号</th> <th style="text-align:left;">命令及描述</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;">[EVAL script numkeys key <a href="https://www.redis.net.cn/order/3643.html" target="_blank" rel="noopener noreferrer">key ...] arg [arg ...]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 执行 Lua 脚本。</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;">[EVALSHA sha1 numkeys key <a href="https://www.redis.net.cn/order/3644.html" target="_blank" rel="noopener noreferrer">key ...] arg [arg ...]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 执行 Lua 脚本。</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;">[SCRIPT EXISTS script <a href="https://www.redis.net.cn/order/3645.html" target="_blank" rel="noopener noreferrer">script ...]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 查看指定的脚本是否已经被保存在缓存当中。</td></tr> <tr><td style="text-align:left;">4</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3646.html" target="_blank" rel="noopener noreferrer">SCRIPT FLUSH<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 从脚本缓存中移除所有脚本。</td></tr> <tr><td style="text-align:left;">5</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3647.html" target="_blank" rel="noopener noreferrer">SCRIPT KILL<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 杀死当前正在运行的 Lua 脚本。</td></tr> <tr><td style="text-align:left;">6</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3648.html" target="_blank" rel="noopener noreferrer">SCRIPT LOAD script<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 将脚本 script 添加到脚本缓存中，但并不立即执行这个脚本。</td></tr></tbody></table> <h2 id="redis-连接"><a href="#redis-连接" class="header-anchor">#</a> Redis 连接</h2> <p>Redis 连接命令主要是用于连接 redis 服务。</p> <h4 id="实例-21"><a href="#实例-21" class="header-anchor">#</a> 实例</h4> <p>以下实例演示了客户端如何通过密码验证连接到 redis 服务，并检测服务是否在运行：</p> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; AUTH &quot;password&quot;OKredis 127.0.0.1:6379&gt; PINGPONG
</code></pre></div><hr> <h3 id="redis-连接命令"><a href="#redis-连接命令" class="header-anchor">#</a> Redis 连接命令</h3> <p>下表列出了 redis 连接的基本命令：</p> <table><thead><tr><th style="text-align:left;">序号</th> <th style="text-align:left;">命令及描述</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3649.html" target="_blank" rel="noopener noreferrer">AUTH password<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 验证密码是否正确</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3650.html" target="_blank" rel="noopener noreferrer">ECHO message<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 打印字符串</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3651.html" target="_blank" rel="noopener noreferrer">PING<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 查看服务是否运行</td></tr> <tr><td style="text-align:left;">4</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3652.html" target="_blank" rel="noopener noreferrer">QUIT<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 关闭当前连接</td></tr> <tr><td style="text-align:left;">5</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3653.html" target="_blank" rel="noopener noreferrer">SELECT index<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 切换到指定的数据库</td></tr></tbody></table> <h2 id="redis-服务器"><a href="#redis-服务器" class="header-anchor">#</a> Redis 服务器</h2> <p>Redis 服务器命令主要是用于管理 redis 服务。</p> <h4 id="实例-22"><a href="#实例-22" class="header-anchor">#</a> 实例</h4> <p>以下实例演示了如何获取 redis 服务器的统计信息：</p> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; INFO # Serverredis_version:2.8.13redis_git_sha1:00000000redis_git_dirty:0redis_build_id:c2238b38b1edb0e2redis_mode:standaloneos:Linux 3.5.0-48-generic x86_64arch_bits:64multiplexing_api:epollgcc_version:4.7.2process_id:3856run_id:0e61abd297771de3fe812a3c21027732ac9f41fetcp_port:6379uptime_in_seconds:11554uptime_in_days:0hz:10lru_clock:16651447config_file: # Clientsconnected_clients:1client-longest_output_list:0client-biggest_input_buf:0blocked_clients:0 # Memoryused_memory:589016used_memory_human:575.21Kused_memory_rss:2461696used_memory_peak:667312used_memory_peak_human:651.67Kused_memory_lua:33792mem_fragmentation_ratio:4.18mem_allocator:jemalloc-3.6.0 # Persistenceloading:0rdb_changes_since_last_save:3rdb_bgsave_in_progress:0rdb_last_save_time:1409158561rdb_last_bgsave_status:okrdb_last_bgsave_time_sec:0rdb_current_bgsave_time_sec:-1aof_enabled:0aof_rewrite_in_progress:0aof_rewrite_scheduled:0aof_last_rewrite_time_sec:-1aof_current_rewrite_time_sec:-1aof_last_bgrewrite_status:okaof_last_write_status:ok # Statstotal_connections_received:24total_commands_processed:294instantaneous_ops_per_sec:0rejected_connections:0sync_full:0sync_partial_ok:0sync_partial_err:0expired_keys:0evicted_keys:0keyspace_hits:41keyspace_misses:82pubsub_channels:0pubsub_patterns:0latest_fork_usec:264 # Replicationrole:masterconnected_slaves:0master_repl_offset:0repl_backlog_active:0repl_backlog_size:1048576repl_backlog_first_byte_offset:0repl_backlog_histlen:0 # CPUused_cpu_sys:10.49used_cpu_user:4.96used_cpu_sys_children:0.00used_cpu_user_children:0.01 # Keyspacedb0:keys=94,expires=1,avg_ttl=41638810db1:keys=1,expires=0,avg_ttl=0db3:keys=1,expires=0,avg_ttl=0
</code></pre></div><hr> <h3 id="redis-服务器命令"><a href="#redis-服务器命令" class="header-anchor">#</a> Redis 服务器命令</h3> <p>下表列出了 redis 服务器的相关命令:</p> <table><thead><tr><th style="text-align:left;">序号</th> <th style="text-align:left;">命令及描述</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3654.html" target="_blank" rel="noopener noreferrer">BGREWRITEAOF<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 异步执行一个 AOF（AppendOnly File） 文件重写操作</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3655.html" target="_blank" rel="noopener noreferrer">BGSAVE<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 在后台异步保存当前数据库的数据到磁盘</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;">[CLIENT KILL <a href="https://www.redis.net.cn/order/3656.html" target="_blank" rel="noopener noreferrer">ip:port] [ID client-id]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 关闭客户端连接</td></tr> <tr><td style="text-align:left;">4</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3657.html" target="_blank" rel="noopener noreferrer">CLIENT LIST<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取连接到服务器的客户端连接列表</td></tr> <tr><td style="text-align:left;">5</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3658.html" target="_blank" rel="noopener noreferrer">CLIENT GETNAME<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取连接的名称</td></tr> <tr><td style="text-align:left;">6</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3659.html" target="_blank" rel="noopener noreferrer">CLIENT PAUSE timeout<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 在指定时间内终止运行来自客户端的命令</td></tr> <tr><td style="text-align:left;">7</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3660.html" target="_blank" rel="noopener noreferrer">CLIENT SETNAME connection-name<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 设置当前连接的名称</td></tr> <tr><td style="text-align:left;">8</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3661.html" target="_blank" rel="noopener noreferrer">CLUSTER SLOTS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取集群节点的映射数组</td></tr> <tr><td style="text-align:left;">9</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3662.html" target="_blank" rel="noopener noreferrer">COMMAND<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取 Redis 命令详情数组</td></tr> <tr><td style="text-align:left;">10</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3663.html" target="_blank" rel="noopener noreferrer">COMMAND COUNT<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取 Redis 命令总数</td></tr> <tr><td style="text-align:left;">11</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3664.html" target="_blank" rel="noopener noreferrer">COMMAND GETKEYS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取给定命令的所有键</td></tr> <tr><td style="text-align:left;">12</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3665.html" target="_blank" rel="noopener noreferrer">TIME<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回当前服务器时间</td></tr> <tr><td style="text-align:left;">13</td> <td style="text-align:left;">[COMMAND INFO command-name <a href="https://www.redis.net.cn/order/3666.html" target="_blank" rel="noopener noreferrer">command-name ...]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取指定 Redis 命令描述的数组</td></tr> <tr><td style="text-align:left;">14</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3667.html" target="_blank" rel="noopener noreferrer">CONFIG GET parameter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取指定配置参数的值</td></tr> <tr><td style="text-align:left;">15</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3668.html" target="_blank" rel="noopener noreferrer">CONFIG REWRITE<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 对启动 Redis 服务器时所指定的 redis.conf 配置文件进行改写</td></tr> <tr><td style="text-align:left;">16</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3669.html" target="_blank" rel="noopener noreferrer">CONFIG SET parameter value<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 修改 redis 配置参数，无需重启</td></tr> <tr><td style="text-align:left;">17</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3670.html" target="_blank" rel="noopener noreferrer">CONFIG RESETSTAT<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 重置 INFO 命令中的某些统计数据</td></tr> <tr><td style="text-align:left;">18</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3671.html" target="_blank" rel="noopener noreferrer">DBSIZE<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回当前数据库的 key 的数量</td></tr> <tr><td style="text-align:left;">19</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3672.html" target="_blank" rel="noopener noreferrer">DEBUG OBJECT key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取 key 的调试信息</td></tr> <tr><td style="text-align:left;">20</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3673.html" target="_blank" rel="noopener noreferrer">DEBUG SEGFAULT<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 让 Redis 服务崩溃</td></tr> <tr><td style="text-align:left;">21</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3674.html" target="_blank" rel="noopener noreferrer">FLUSHALL<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 删除所有数据库的所有key</td></tr> <tr><td style="text-align:left;">22</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3675.html" target="_blank" rel="noopener noreferrer">FLUSHDB<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 删除当前数据库的所有key</td></tr> <tr><td style="text-align:left;">23</td> <td style="text-align:left;">[INFO <a href="https://www.redis.net.cn/order/3676.html" target="_blank" rel="noopener noreferrer">section]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 获取 Redis 服务器的各种信息和统计数值</td></tr> <tr><td style="text-align:left;">24</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3677.html" target="_blank" rel="noopener noreferrer">LASTSAVE<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回最近一次 Redis 成功将数据保存到磁盘上的时间，以 UNIX 时间戳格式表示</td></tr> <tr><td style="text-align:left;">25</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3678.html" target="_blank" rel="noopener noreferrer">MONITOR<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 实时打印出 Redis 服务器接收到的命令，调试用</td></tr> <tr><td style="text-align:left;">26</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3679.html" target="_blank" rel="noopener noreferrer">ROLE<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回主从实例所属的角色</td></tr> <tr><td style="text-align:left;">27</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3680.html" target="_blank" rel="noopener noreferrer">SAVE<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 异步保存数据到硬盘</td></tr> <tr><td style="text-align:left;">28</td> <td style="text-align:left;">[SHUTDOWN <a href="https://www.redis.net.cn/order/3681.html" target="_blank" rel="noopener noreferrer">NOSAVE] [SAVE]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 异步保存数据到硬盘，并关闭服务器</td></tr> <tr><td style="text-align:left;">29</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3682.html" target="_blank" rel="noopener noreferrer">SLAVEOF host port<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 将当前服务器转变为指定服务器的从属服务器(slave server)</td></tr> <tr><td style="text-align:left;">30</td> <td style="text-align:left;">[SLOWLOG subcommand <a href="https://www.redis.net.cn/order/3683.html" target="_blank" rel="noopener noreferrer">argument]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 管理 redis 的慢日志</td></tr> <tr><td style="text-align:left;">31</td> <td style="text-align:left;"><a href="https://www.redis.net.cn/order/3684.html" target="_blank" rel="noopener noreferrer">SYNC<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 用于复制功能(replication)的内部命令</td></tr></tbody></table> <h2 id="redis-数据备份与恢复"><a href="#redis-数据备份与恢复" class="header-anchor">#</a> Redis 数据备份与恢复</h2> <p>Redis <strong>SAVE</strong> 命令用于创建当前数据库的备份。</p> <h4 id="语法-8"><a href="#语法-8" class="header-anchor">#</a> 语法</h4> <p>redis Save 命令基本语法如下：</p> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; SAVE 
</code></pre></div><h4 id="实例-23"><a href="#实例-23" class="header-anchor">#</a> 实例</h4> <div class="language- extra-class"><pre class="language-text"><code>redis 127.0.0.1:6379&gt; SAVE OK
</code></pre></div><p>该命令将在 redis 安装目录中创建dump.rdb文件。</p> <hr> <h3 id="恢复数据"><a href="#恢复数据" class="header-anchor">#</a> 恢复数据</h3> <p>如果需要恢复数据，只需将备份文件 (dump.rdb) 移动到 redis 安装目录并启动服务即可。获取 redis 目录可以使用 <strong>CONFIG</strong> 命令，如下所示：</p> <div class="language- extra-class"><pre class="language-text"><code> redis 127.0.0.1:6379&gt; CONFIG GET dir1) &quot;dir&quot;2) &quot;/usr/local/redis/bin&quot; 
</code></pre></div><p>以上命令 <strong>CONFIG GET dir</strong> 输出的 redis 安装目录为 /usr/local/redis/bin。</p> <hr> <h3 id="bgsave"><a href="#bgsave" class="header-anchor">#</a> Bgsave</h3> <p>创建 redis 备份文件也可以使用命令 <strong>BGSAVE</strong>，该命令在后台执行。</p> <h4 id="实例-24"><a href="#实例-24" class="header-anchor">#</a> 实例</h4> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; BGSAVE Background saving started
</code></pre></div><h2 id="redis-安全"><a href="#redis-安全" class="header-anchor">#</a> Redis 安全</h2> <p>我们可以通过 redis 的配置文件设置密码参数，这样客户端连接到 redis 服务就需要密码验证，这样可以让你的 redis 服务更安全。</p> <h4 id="实例-25"><a href="#实例-25" class="header-anchor">#</a> 实例</h4> <p>我们可以通过以下命令查看是否设置了密码验证：</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; CONFIG get requirepass1) &quot;requirepass&quot;2) &quot;&quot;
</code></pre></div><p>默认情况下 requirepass 参数是空的，这就意味着你无需通过密码验证就可以连接到 redis 服务。</p> <p>你可以通过以下命令来修改该参数：</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; CONFIG set requirepass &quot;w3cschool.cc&quot;OK127.0.0.1:6379&gt; CONFIG get requirepass1) &quot;requirepass&quot;2) &quot;w3cschool.cc&quot;
</code></pre></div><p>设置密码后，客户端连接 redis 服务就需要密码验证，否则无法执行命令。</p> <h4 id="语法-9"><a href="#语法-9" class="header-anchor">#</a> 语法</h4> <p><strong>AUTH</strong> 命令基本语法格式如下：</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; AUTH password
</code></pre></div><h4 id="实例-26"><a href="#实例-26" class="header-anchor">#</a> 实例</h4> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; AUTH &quot;w3cschool.cc&quot;OK127.0.0.1:6379&gt; SET mykey &quot;Test value&quot;OK127.0.0.1:6379&gt; GET mykey&quot;Test value&quot;
</code></pre></div><h2 id="redis-性能测试"><a href="#redis-性能测试" class="header-anchor">#</a> Redis 性能测试</h2> <p>Redis 性能测试是通过同时执行多个命令实现的。</p> <h4 id="语法-10"><a href="#语法-10" class="header-anchor">#</a> 语法</h4> <p>redis 性能测试的基本命令如下：</p> <div class="language- extra-class"><pre class="language-text"><code>redis-benchmark [option] [option value]
</code></pre></div><h4 id="实例-27"><a href="#实例-27" class="header-anchor">#</a> 实例</h4> <p>以下实例同时执行 10000 个请求来检测性能：</p> <div class="language- extra-class"><pre class="language-text"><code>redis-benchmark -n 100000 PING_INLINE: 141043.72 requests per secondPING_BULK: 142857.14 requests per secondSET: 141442.72 requests per secondGET: 145348.83 requests per secondINCR: 137362.64 requests per secondLPUSH: 145348.83 requests per secondLPOP: 146198.83 requests per secondSADD: 146198.83 requests per secondSPOP: 149253.73 requests per secondLPUSH (needed to benchmark LRANGE): 148588.42 requests per secondLRANGE_100 (first 100 elements): 58411.21 requests per secondLRANGE_300 (first 300 elements): 21195.42 requests per secondLRANGE_500 (first 450 elements): 14539.11 requests per secondLRANGE_600 (first 600 elements): 10504.20 requests per secondMSET (10 keys): 93283.58 requests per second
</code></pre></div><p>redis 性能测试工具可选参数如下所示：</p> <table><thead><tr><th style="text-align:left;">序号</th> <th style="text-align:left;">选项</th> <th style="text-align:left;">描述</th> <th style="text-align:left;">默认值</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;"><strong>-h</strong></td> <td style="text-align:left;">指定服务器主机名</td> <td style="text-align:left;">127.0.0.1</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;"><strong>-p</strong></td> <td style="text-align:left;">指定服务器端口</td> <td style="text-align:left;">6379</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;"><strong>-s</strong></td> <td style="text-align:left;">指定服务器 socket</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">4</td> <td style="text-align:left;"><strong>-c</strong></td> <td style="text-align:left;">指定并发连接数</td> <td style="text-align:left;">50</td></tr> <tr><td style="text-align:left;">5</td> <td style="text-align:left;"><strong>-n</strong></td> <td style="text-align:left;">指定请求数</td> <td style="text-align:left;">10000</td></tr> <tr><td style="text-align:left;">6</td> <td style="text-align:left;"><strong>-d</strong></td> <td style="text-align:left;">以字节的形式指定 SET/GET 值的数据大小</td> <td style="text-align:left;">2</td></tr> <tr><td style="text-align:left;">7</td> <td style="text-align:left;"><strong>-k</strong></td> <td style="text-align:left;">1=keep alive 0=reconnect</td> <td style="text-align:left;">1</td></tr> <tr><td style="text-align:left;">8</td> <td style="text-align:left;"><strong>-r</strong></td> <td style="text-align:left;">SET/GET/INCR 使用随机 key, SADD 使用随机值</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">9</td> <td style="text-align:left;"><strong>-P</strong></td> <td style="text-align:left;">通过管道传输 `` 请求</td> <td style="text-align:left;">1</td></tr> <tr><td style="text-align:left;">10</td> <td style="text-align:left;"><strong>-q</strong></td> <td style="text-align:left;">强制退出 redis。仅显示 query/sec 值</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">11</td> <td style="text-align:left;"><strong>--csv</strong></td> <td style="text-align:left;">以 CSV 格式输出</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">12</td> <td style="text-align:left;"><strong>-l</strong></td> <td style="text-align:left;">生成循环，永久执行测试</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">13</td> <td style="text-align:left;"><strong>-t</strong></td> <td style="text-align:left;">仅运行以逗号分隔的测试命令列表。</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">14</td> <td style="text-align:left;"><strong>-I</strong></td> <td style="text-align:left;">Idle 模式。仅打开 N 个 idle 连接并等待。</td> <td style="text-align:left;"></td></tr></tbody></table> <h4 id="实例-28"><a href="#实例-28" class="header-anchor">#</a> 实例</h4> <p>以下实例我们使用了多个参数来测试 redis 性能：</p> <div class="language- extra-class"><pre class="language-text"><code>redis-benchmark -h 127.0.0.1 -p 6379 -t set,lpush -n 100000 -q SET: 146198.83 requests per secondLPUSH: 145560.41 requests per second
</code></pre></div><p>以上实例中主机为 127.0.0.1，端口号为 6379，执行的命令为 set,lpush，请求数为 10000，通过 -q 参数让结果只显示每秒执行的请求数。</p> <h2 id="redis-客户端连接"><a href="#redis-客户端连接" class="header-anchor">#</a> Redis 客户端连接</h2> <p>Redis 通过监听一个 TCP 端口或者 Unix socket 的方式来接收来自客户端的连接，当一个连接建立后，Redis 内部会进行以下一些操作：</p> <ul><li>首先，客户端 socket 会被设置为非阻塞模式，因为 Redis 在网络事件处理上采用的是非阻塞多路复用模型。</li> <li>然后为这个 socket 设置 TCP_NODELAY 属性，禁用 Nagle 算法</li> <li>然后创建一个可读的文件事件用于监听这个客户端 socket 的数据发送</li></ul> <hr> <h3 id="最大连接数"><a href="#最大连接数" class="header-anchor">#</a> 最大连接数</h3> <p>在 Redis2.4 中，最大连接数是被直接硬编码在代码里面的，而在2.6版本中这个值变成可配置的。</p> <p>maxclients 的默认值是 10000，你也可以在 redis.conf 中对这个值进行修改。</p> <div class="language- extra-class"><pre class="language-text"><code>config get maxclients 1) &quot;maxclients&quot;2) &quot;10000&quot;
</code></pre></div><h4 id="实例-29"><a href="#实例-29" class="header-anchor">#</a> 实例</h4> <p>以下实例我们在服务启动时设置最大连接数为 100000：</p> <div class="language- extra-class"><pre class="language-text"><code>redis-server --maxclients 100000
</code></pre></div><hr> <h3 id="客户端命令"><a href="#客户端命令" class="header-anchor">#</a> 客户端命令</h3> <table><thead><tr><th style="text-align:left;">S.N.</th> <th style="text-align:left;">命令</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;"><strong>CLIENT LIST</strong></td> <td style="text-align:left;">返回连接到 redis 服务的客户端列表</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;"><strong>CLIENT SETNAME</strong></td> <td style="text-align:left;">设置当前连接的名称</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;"><strong>CLIENT GETNAME</strong></td> <td style="text-align:left;">获取通过 CLIENT SETNAME 命令设置的服务名称</td></tr> <tr><td style="text-align:left;">4</td> <td style="text-align:left;"><strong>CLIENT PAUSE</strong></td> <td style="text-align:left;">挂起客户端连接，指定挂起的时间以毫秒计</td></tr> <tr><td style="text-align:left;">5</td> <td style="text-align:left;"><strong>CLIENT KILL</strong></td> <td style="text-align:left;">关闭客户端连接</td></tr></tbody></table> <h2 id="redis-管道技术"><a href="#redis-管道技术" class="header-anchor">#</a> Redis 管道技术</h2> <p>Redis是一种基于客户端-服务端模型以及请求/响应协议的TCP服务。这意味着通常情况下一个请求会遵循以下步骤：</p> <ul><li>客户端向服务端发送一个查询请求，并监听Socket返回，通常是以阻塞模式，等待服务端响应。</li> <li>服务端处理命令，并将结果返回给客户端。</li></ul> <hr> <h3 id="redis-管道技术-2"><a href="#redis-管道技术-2" class="header-anchor">#</a> Redis 管道技术</h3> <p>Redis 管道技术可以在服务端未响应时，客户端可以继续向服务端发送请求，并最终一次性读取所有服务端的响应。</p> <h4 id="实例-30"><a href="#实例-30" class="header-anchor">#</a> 实例</h4> <p>查看 redis 管道，只需要启动 redis 实例并输入以下命令：</p> <div class="language- extra-class"><pre class="language-text"><code>$(echo -en &quot;PING\r\n SET w3ckey redis\r\nGET w3ckey\r\nINCR visitor\r\nINCR visitor\r\nINCR visitor\r\n&quot;; sleep 10) | nc localhost 6379 +PONG+OKredis:1:2:3
</code></pre></div><p>以上实例中我们通过使用 <strong>PING</strong> 命令查看redis服务是否可用， 之后我们们设置了 w3ckey 的值为 redis，然后我们获取 w3ckey 的值并使得 visitor 自增 3 次。</p> <p>在返回的结果中我们可以看到这些命令一次性向 redis 服务提交，并最终一次性读取所有服务端的响应</p> <hr> <h3 id="管道技术的优势"><a href="#管道技术的优势" class="header-anchor">#</a> 管道技术的优势</h3> <p>管道技术最显著的优势是提高了 redis 服务的性能。</p> <h4 id="一些测试数据"><a href="#一些测试数据" class="header-anchor">#</a> 一些测试数据</h4> <p>在下面的测试中，我们将使用Redis的Ruby客户端，支持管道技术特性，测试管道技术对速度的提升效果。</p> <div class="language- extra-class"><pre class="language-text"><code>require 'rubygems' require 'redis'def bench(descr) start = Time.now yield puts &quot;#{descr} #{Time.now-start} seconds&quot; enddef without_pipelining r = Redis.new 10000.times {         r.ping } enddef with_pipelining r = Redis.new r.pipelined {         10000.times {                 r.ping         } } endbench(&quot;without pipelining&quot;) {         without_pipelining } bench(&quot;with pipelining&quot;) {         with_pipelining }
</code></pre></div><p>从处于局域网中的Mac OS X系统上执行上面这个简单脚本的数据表明，开启了管道操作后，往返时延已经被改善得相当低了。</p> <div class="language- extra-class"><pre class="language-text"><code>without pipelining 1.185238 seconds with pipelining 0.250783 seconds
</code></pre></div><p>如你所见，开启管道后，我们的速度效率提升了5倍。</p> <h2 id="redis-分区"><a href="#redis-分区" class="header-anchor">#</a> Redis 分区</h2> <p>分区是分割数据到多个Redis实例的处理过程，因此每个实例只保存key的一个子集。</p> <h4 id="分区的优势"><a href="#分区的优势" class="header-anchor">#</a> 分区的优势</h4> <ul><li>通过利用多台计算机内存的和值，允许我们构造更大的数据库。</li> <li>通过多核和多台计算机，允许我们扩展计算能力；通过多台计算机和网络适配器，允许我们扩展网络带宽。</li></ul> <h4 id="分区的不足"><a href="#分区的不足" class="header-anchor">#</a> 分区的不足</h4> <p>redis的一些特性在分区方面表现的不是很好：</p> <ul><li>涉及多个key的操作通常是不被支持的。举例来说，当两个set映射到不同的redis实例上时，你就不能对这两个set执行交集操作。</li> <li>涉及多个key的redis事务不能使用。</li> <li>当使用分区时，数据处理较为复杂，比如你需要处理多个rdb/aof文件，并且从多个实例和主机备份持久化文件。</li> <li>增加或删除容量也比较复杂。redis集群大多数支持在运行时增加、删除节点的透明数据平衡的能力，但是类似于客户端分区、代理等其他系统则不支持这项特性。然而，一种叫做presharding的技术对此是有帮助的。</li></ul> <hr> <h3 id="分区类型"><a href="#分区类型" class="header-anchor">#</a> 分区类型</h3> <p>Redis 有两种类型分区。 假设有4个Redis实例 R0，R1，R2，R3，和类似user:1，user:2这样的表示用户的多个key，对既定的key有多种不同方式来选择这个key存放在哪个实例中。也就是说，有不同的系统来映射某个key到某个Redis服务。</p> <h4 id="范围分区"><a href="#范围分区" class="header-anchor">#</a> 范围分区</h4> <p>最简单的分区方式是按范围分区，就是映射一定范围的对象到特定的Redis实例。</p> <p>比如，ID从0到10000的用户会保存到实例R0，ID从10001到 20000的用户会保存到R1，以此类推。</p> <p>这种方式是可行的，并且在实际中使用，不足就是要有一个区间范围到实例的映射表。这个表要被管理，同时还需要各 种对象的映射表，通常对Redis来说并非是好的方法。</p> <h4 id="哈希分区"><a href="#哈希分区" class="header-anchor">#</a> 哈希分区</h4> <p>另外一种分区方法是hash分区。这对任何key都适用，也无需是object_name:这种形式，像下面描述的一样简单：</p> <ul><li>用一个hash函数将key转换为一个数字，比如使用crc32 hash函数。对key foobar执行crc32(foobar)会输出类似93024922的整数。</li> <li>对这个整数取模，将其转化为0-3之间的数字，就可以将这个整数映射到4个Redis实例中的一个了。93024922 % 4 = 2，就是说key foobar应该被存到R2实例中。注意：取模操作是取除的余数，通常在多种编程语言中用%操作符实现。</li></ul> <h2 id="java-使用-redis"><a href="#java-使用-redis" class="header-anchor">#</a> Java 使用 Redis</h2> <h3 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h3> <p>开始在 Java 中使用 Redis 前， 我们需要确保已经安装了 redis 服务及 Java redis 驱动，且你的机器上能正常使用 Java。 Java的安装配置可以参考我们的 <a href="https://www.redis.net.cn/tutorial/8810.html" target="_blank" rel="noopener noreferrer">Java开发环境配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 接下来让我们安装 Java redis 驱动：</p> <ul><li>首先你需要下载驱动包，<a href="https://www.redis.net.cn/tutorial/8811.html" target="_blank" rel="noopener noreferrer"><strong>下载 jedis.jar</strong><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，确保下载最新驱动包。</li> <li>在你的classpath中包含该驱动包。</li></ul> <hr> <h3 id="连接到-redis-服务"><a href="#连接到-redis-服务" class="header-anchor">#</a> 连接到 redis 服务</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis</span><span class="token punctuation">.</span><span class="token class-name">Jedis</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisJava</span> <span class="token punctuation">{</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//连接本地的 Redis 服务</span>
      <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Connection to server sucessfully&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//查看服务是否运行</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Server is running: &quot;</span><span class="token operator">+</span>jedis<span class="token punctuation">.</span><span class="token function">ping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>编译以上 Java 程序，确保驱动包的路径是正确的。</p> <div class="language-java extra-class"><pre class="language-java"><code>$javac <span class="token class-name">RedisJava</span><span class="token punctuation">.</span>java
$java <span class="token class-name">RedisJava</span>
<span class="token class-name">Connection</span> <span class="token keyword">to</span> server sucessfully
<span class="token class-name">Server</span> is running<span class="token operator">:</span> PONG
 
<span class="token class-name">Redis</span> <span class="token class-name">Java</span> <span class="token class-name">String</span> <span class="token class-name">Example</span>
</code></pre></div><hr> <h3 id="redis-java-string-字符串-实例"><a href="#redis-java-string-字符串-实例" class="header-anchor">#</a> Redis Java String(字符串) 实例</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis</span><span class="token punctuation">.</span><span class="token class-name">Jedis</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisStringJava</span> <span class="token punctuation">{</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//连接本地的 Redis 服务</span>
      <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Connection to server sucessfully&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//设置 redis 字符串数据</span>
      jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;w3ckey&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Redis tutorial&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">// 获取存储的数据并输出</span>
     <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Stored string in redis:: &quot;</span><span class="token operator">+</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;w3ckey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>编译以上程序。</p> <div class="language-java extra-class"><pre class="language-java"><code>$javac <span class="token class-name">RedisStringJava</span><span class="token punctuation">.</span>java
$java <span class="token class-name">RedisStringJava</span>
<span class="token class-name">Connection</span> <span class="token keyword">to</span> server sucessfully
<span class="token class-name">Stored</span> string in redis<span class="token operator">::</span> <span class="token class-name">Redis</span> tutorial
</code></pre></div><hr> <h3 id="redis-java-list-列表-实例"><a href="#redis-java-list-列表-实例" class="header-anchor">#</a> Redis Java List(列表) 实例</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis</span><span class="token punctuation">.</span><span class="token class-name">Jedis</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisListJava</span> <span class="token punctuation">{</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//连接本地的 Redis 服务</span>
      <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Connection to server sucessfully&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//存储数据到列表中</span>
      jedis<span class="token punctuation">.</span><span class="token function">lpush</span><span class="token punctuation">(</span><span class="token string">&quot;tutorial-list&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Redis&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      jedis<span class="token punctuation">.</span><span class="token function">lpush</span><span class="token punctuation">(</span><span class="token string">&quot;tutorial-list&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Mongodb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      jedis<span class="token punctuation">.</span><span class="token function">lpush</span><span class="token punctuation">(</span><span class="token string">&quot;tutorial-list&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Mysql&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">// 获取存储的数据并输出</span>
     <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">lrange</span><span class="token punctuation">(</span><span class="token string">&quot;tutorial-list&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Stored string in redis:: &quot;</span><span class="token operator">+</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>编译以上程序。</p> <div class="language-java extra-class"><pre class="language-java"><code>$javac <span class="token class-name">RedisListJava</span><span class="token punctuation">.</span>java
$java <span class="token class-name">RedisListJava</span>
<span class="token class-name">Connection</span> <span class="token keyword">to</span> server sucessfully
<span class="token class-name">Stored</span> string in redis<span class="token operator">::</span> <span class="token class-name">Redis</span>
<span class="token class-name">Stored</span> string in redis<span class="token operator">::</span> <span class="token class-name">Mongodb</span>
<span class="token class-name">Stored</span> string in redis<span class="token operator">::</span> <span class="token class-name">Mysql</span>
</code></pre></div><hr> <h3 id="redis-java-keys-实例"><a href="#redis-java-keys-实例" class="header-anchor">#</a> Redis Java Keys 实例</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis</span><span class="token punctuation">.</span><span class="token class-name">Jedis</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisKeyJava</span> <span class="token punctuation">{</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//连接本地的 Redis 服务</span>
      <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Connection to server sucessfully&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      
     <span class="token comment">// 获取数据并输出</span>
     <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;List of stored keys:: &quot;</span><span class="token operator">+</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>编译以上程序。</p> <div class="language- extra-class"><pre class="language-text"><code>$javac RedisKeyJava.java
$java RedisKeyJava
Connection to server sucessfully
List of stored keys:: tutorial-name
List of stored keys:: tutorial-list
</code></pre></div><h2 id="php-使用-redis"><a href="#php-使用-redis" class="header-anchor">#</a> PHP 使用 Redis</h2> <h3 id="安装-2"><a href="#安装-2" class="header-anchor">#</a> 安装</h3> <p>开始在 PHP 中使用 Redis 前， 我们需要确保已经安装了 redis 服务及 PHP redis 驱动，且你的机器上能正常使用 PHP。 接下来让我们安装 PHP redis 驱动：下载地址为:<a href="https://github.com/nicolasff/phpredis" target="_blank" rel="noopener noreferrer"><strong>https://github.com/nicolasff/phpredis</strong><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h4 id="php安装redis扩展"><a href="#php安装redis扩展" class="header-anchor">#</a> PHP安装redis扩展</h4> <div class="language- extra-class"><pre class="language-text"><code>/usr/local/php/bin/phpize              #php安装后的路径 ./configure --with-php-config=/usr/local/php/bin/php-config make &amp;&amp; make install
</code></pre></div><h4 id="修改php-ini文件"><a href="#修改php-ini文件" class="header-anchor">#</a> 修改php.ini文件</h4> <div class="language- extra-class"><pre class="language-text"><code>vi /usr/local/php/lib/php.ini
</code></pre></div><p>增加如下内容:</p> <div class="language- extra-class"><pre class="language-text"><code>extension_dir = &quot;/usr/local/php/lib/php/extensions/no-debug-zts-20090626&quot; extension=redis.so
</code></pre></div><p>安装完成后重启php-fpm 或 apache。查看phpinfo信息，就能看到redis扩展。</p> <p><img src="https://www.redis.net.cn/Image/14022020088882.jpg" alt="PHP 使用 Redis"></p> <hr> <h3 id="连接到-redis-服务-2"><a href="#连接到-redis-服务-2" class="header-anchor">#</a> 连接到 redis 服务</h3> <div class="language- extra-class"><pre class="language-text"><code>&lt;?php    //连接本地的 Redis 服务   $redis = new Redis();   $redis-&gt;connect('127.0.0.1', 6379);   echo &quot;Connection to server sucessfully&quot;;         //查看服务是否运行   echo &quot;Server is running: &quot;+ $redis-&gt;ping();?&gt;
</code></pre></div><p>执行脚本，输出结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>Connection to server sucessfullyServer is running: PONG
</code></pre></div><hr> <h3 id="redis-php-string-字符串-实例"><a href="#redis-php-string-字符串-实例" class="header-anchor">#</a> Redis PHP String(字符串) 实例</h3> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
    <span class="token comment">//连接本地的 Redis 服务</span>
   <span class="token variable">$redis</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Redis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'127.0.0.1'</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;Connection to server sucessfully&quot;</span><span class="token punctuation">;</span>
         <span class="token comment">//查看服务是否运行</span>
   <span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;Server is running: &quot;</span><span class="token operator">+</span> <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">ping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre></div><p>执行脚本，输出结果为：</p> <div class="language-php extra-class"><pre class="language-php"><code>Connection to server sucessfully
Stored string in redis<span class="token punctuation">:</span><span class="token punctuation">:</span> Redis tutorial
</code></pre></div><hr> <h3 id="redis-php-list-列表-实例"><a href="#redis-php-list-列表-实例" class="header-anchor">#</a> Redis PHP List(列表) 实例</h3> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
   <span class="token comment">//连接本地的 Redis 服务</span>
   <span class="token variable">$redis</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Redis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'127.0.0.1'</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;Connection to server sucessfully&quot;</span><span class="token punctuation">;</span>
   <span class="token comment">//设置 redis 字符串数据</span>
   <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;tutorial-name&quot;</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">&quot;Redis tutorial&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// 获取存储的数据并输出</span>
   <span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;Stored string in redis:: &quot;</span> <span class="token operator">+</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;tutorial-name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre></div><p>执行脚本，输出结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>Connection to server sucessfull
yStored string in redis::RedisMongodbMysql
</code></pre></div><hr> <h3 id="redis-php-keys-实例"><a href="#redis-php-keys-实例" class="header-anchor">#</a> Redis PHP Keys 实例</h3> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
   <span class="token comment">//连接本地的 Redis 服务</span>
   <span class="token variable">$redis</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Redis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'127.0.0.1'</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;Connection to server sucessfully&quot;</span><span class="token punctuation">;</span>
   <span class="token comment">// 获取数据并输出</span>
   <span class="token variable">$arList</span> <span class="token operator">=</span> <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;Stored keys in redis:: &quot;</span>
   <span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$arList</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre></div><p>执行脚本，输出结果为：</p> <div class="language- extra-class"><pre class="language-text"><code>Connection to server sucessfullyStored string in redis::tutorial-nametutorial-list
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ab60294b.js" defer></script><script src="/assets/js/2.0769d472.js" defer></script><script src="/assets/js/50.c5a763c1.js" defer></script>
  </body>
</html>
