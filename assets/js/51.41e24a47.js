(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{416:function(e,t,r){"use strict";r.r(t);var a=r(26),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"redis-hyperloglog"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#redis-hyperloglog"}},[e._v("#")]),e._v(" Redis HyperLogLog")]),e._v(" "),r("p",[e._v("Redis 在 2.8.9 版本添加了 HyperLogLog 结构。")]),e._v(" "),r("p",[e._v("Redis HyperLogLog 是用来做基数统计的算法，HyperLogLog 的优点是，在输入元素的数量或者体积非常非常大时，计算基数所需的空间总是固定 的、并且是很小的。")]),e._v(" "),r("p",[e._v("在 Redis 里面，每个 HyperLogLog 键只需要花费 12 KB 内存，就可以计算接近 2^64 个不同元素的基 数。这和计算基数时，元素越多耗费内存就越多的集合形成鲜明对比。")]),e._v(" "),r("p",[e._v("但是，因为 HyperLogLog 只会根据输入元素来计算基数，而不会储存输入元素本身，所以 HyperLogLog 不能像集合那样，返回输入的各个元素。")]),e._v(" "),r("hr"),e._v(" "),r("h2",{attrs:{id:"什么是基数"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#什么是基数"}},[e._v("#")]),e._v(" 什么是基数?")]),e._v(" "),r("p",[e._v("比如数据集 {1, 3, 5, 7, 5, 7, 8}， 那么这个数据集的基数集为 {1, 3, 5 ,7, 8}, 基数(不重复元素)为5。 基数估计就是在误差可接受的范围内，快速计算基数。")]),e._v(" "),r("hr"),e._v(" "),r("h2",{attrs:{id:"实例"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[e._v("#")]),e._v(" 实例")]),e._v(" "),r("p",[e._v("以下实例演示了 HyperLogLog 的工作过程：")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v('redis 127.0.0.1:6379> PFADD w3ckey "redis"\n \n1) (integer) 1\n \nredis 127.0.0.1:6379> PFADD w3ckey "mongodb"\n \n1) (integer) 1\n \nredis 127.0.0.1:6379> PFADD w3ckey "mysql"\n \n1) (integer) 1\n \nredis 127.0.0.1:6379> PFCOUNT w3ckey\n \n(integer) 3\n')])])]),r("hr"),e._v(" "),r("h2",{attrs:{id:"redis-hyperloglog-命令"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#redis-hyperloglog-命令"}},[e._v("#")]),e._v(" Redis HyperLogLog 命令")]),e._v(" "),r("p",[e._v("下表列出了 redis HyperLogLog 的基本命令：")]),e._v(" "),r("table",[r("thead",[r("tr",[r("th",{staticStyle:{"text-align":"left"}},[e._v("序号")]),e._v(" "),r("th",{staticStyle:{"text-align":"left"}},[e._v("命令及描述")])])]),e._v(" "),r("tbody",[r("tr",[r("td",{staticStyle:{"text-align":"left"}},[e._v("1")]),e._v(" "),r("td",{staticStyle:{"text-align":"left"}},[e._v("[PFADD key element "),r("a",{attrs:{href:"https://www.redis.net.cn/order/3629.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("element ...]"),r("OutboundLink")],1),e._v(" 添加指定元素到 HyperLogLog 中。")])]),e._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[e._v("2")]),e._v(" "),r("td",{staticStyle:{"text-align":"left"}},[e._v("[PFCOUNT key "),r("a",{attrs:{href:"https://www.redis.net.cn/order/3630.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("key ...]"),r("OutboundLink")],1),e._v(" 返回给定 HyperLogLog 的基数估算值。")])]),e._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[e._v("3")]),e._v(" "),r("td",{staticStyle:{"text-align":"left"}},[e._v("[PFMERGE destkey sourcekey "),r("a",{attrs:{href:"https://www.redis.net.cn/order/3631.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("sourcekey ...]"),r("OutboundLink")],1),e._v(" 将多个 HyperLogLog 合并为一个 HyperLogLog")])])])])])}),[],!1,null,null,null);t.default=s.exports}}]);